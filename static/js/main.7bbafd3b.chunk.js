(this.webpackJsonpreadero=this.webpackJsonpreadero||[]).push([[0],{13:function(e,t,n){e.exports={container:"styles_container__xRGQ3",topLine:"styles_topLine__9Xzw9",controls:"styles_controls__aw6aK",button:"styles_button__1pqxT",wordsPerMinute:"styles_wordsPerMinute__2rsVl",stats:"styles_stats__2RUm0",bar:"styles_bar__xDlIR",bottom:"styles_bottom__1djMp"}},14:function(e,t,n){e.exports={container:"styles_container__3L1DU",book:"styles_book__3kr_u",cover:"styles_cover__6Uu98",nocover:"styles_nocover__2Rzyk",bookWrapper:"styles_bookWrapper__385Le",title:"styles_title__2fozK",author:"styles_author__1rUEC",bottom:"styles_bottom__3ye7t"}},18:function(e,t,n){e.exports={container:"styles_container__HUCkD",header:"styles_header__3miEM",title:"styles_title__1elQZ",add:"styles_add__h5c36",listContainer:"styles_listContainer__26jV9",list:"styles_list__1Gvkp",bottomMenu:"styles_bottomMenu__2YYEk"}},23:function(e,t,n){e.exports={container:"styles_container__1BmkX",b:"styles_b__1Qifu",list:"styles_list__1RbfW",sentenceRow:"styles_sentenceRow__1tuBL",selected:"styles_selected__3yVPV"}},33:function(e,t,n){e.exports={container:"styles_container__PILz8",title:"styles_title__3qgYC"}},40:function(e,t,n){e.exports={container:"styles_container__3TSyu"}},42:function(e,t,n){e.exports={container:"styles_container__1qrsw"}},49:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(36),o=n.n(c),i=(n(49),n(5)),s=n(20),l=n(11),u=n(6),f=n(44),d=n(3);function b(){var e=Object(r.createContext)(void 0);return[function(){var t=Object(r.useContext)(e);if(void 0===t)throw new Error("useCtx must be inside a Provider with a value");return t},e.Provider]}var p=n(1),v={font:"Kazemir",fontSize:48,wordsPerMinute:320,useORP:!0,slowDownOnLongWords:!0},j=b(),m=Object(d.a)(j,2),O=m[0],h=m[1],x=function(e){var t=e.children,n=Object(r.useState)(null),a=Object(d.a)(n,2),c=a[0],o=a[1];Object(r.useEffect)((function(){var e={},t=v.wordsPerMinute,n=Object(f.a)(v,["wordsPerMinute"]),r=localStorage.getItem("settings");r?Object.assign(e,JSON.parse(r)):(localStorage.setItem("settings",JSON.stringify(n)),Object.assign(e,n));var a=localStorage.getItem("wordsPerMinute");a?e.wordsPerMinute=Number(a):(localStorage.setItem("wordsPerMinute",String(t)),e.wordsPerMinute=t),o(e)}),[]);var i=Object(r.useCallback)((function(e,t){o((function(n){return n?("wordsPerMinute"===e?localStorage.setItem("wordsPerMinute",String(t)):localStorage.setItem("settings",JSON.stringify(Object(u.a)(Object(u.a)({},n),{},Object(l.a)({},e,t)))),Object(u.a)(Object(u.a)({},n),{},Object(l.a)({},e,t))):null}))}),[]),s=Object(r.useCallback)((function(e){return i("wordsPerMinute",e)}),[i]),b=Object(r.useCallback)((function(e){return i("wordsPerMinute",((null===c||void 0===c?void 0:c.wordsPerMinute)||v.wordsPerMinute)+e)}),[null===c||void 0===c?void 0:c.wordsPerMinute,i]),j=Object(r.useCallback)((function(e){return i("font",e)}),[i]),m=Object(r.useCallback)((function(e){return i("fontSize",e)}),[i]),O=Object(r.useCallback)((function(e){return i("useORP",e)}),[i]),x=Object(r.useCallback)((function(e){return i("slowDownOnLongWords",e)}),[i]);return c?Object(p.jsx)(h,{value:{settings:c,setWordsPerMinute:s,updateWordsPerMinute:b,setFont:j,setFontSize:m,setUseORP:O,setSlowDownOnLongWords:x},children:t}):null},g=n(17),y=n(2),w=n.n(y),k=n(16),_=n(8),S=n(21),C=n.n(S),I=n(37),N=n.n(I),P=n(30),M=n.n(P),E=n(38),B=n.n(E),W=function(){};W.trim=function(e){for(;""===e[e.length-1];)e.pop();for(;""===e[0];)e.shift();return e},W.tokenize=function(e){var t=e.match(/(?<=\s+|^)["'\u2018\u201c'"[({\u27e8]?(.*?[.?!])(\s[.?!])*["'\u2019\u201d'"\])}\u27e9]?(?=\s+|$)|(?<=\s+|^)\S(.*?[.?!])(\s[.?!])*(?=\s+|$)/g);return t?(t=t.map(Function.prototype.call,String.prototype.trim),this.trim(t)):[e]};var z=W;function L(e,t){if(e.files[t])return e.files[t];var n=e.filter((function(e,n){return n.name.toLowerCase()===t.toLowerCase()}));return n.length>0?n[0]:null}function R(e){return T.apply(this,arguments)}function T(){return(T=Object(_.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=L(t,"mimetype")){e.next=3;break}throw new Error("No mimetype file in archive");case 3:return e.next=5,n.async("text");case 5:if("application/epub+zip"===e.sent.toLowerCase().trim()){e.next=8;break}throw new Error("Unsupported mime type");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return F.apply(this,arguments)}function F(){return(F=Object(_.a)(w.a.mark((function e(t){var n,r,a,c,o,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=L(t,"meta-inf/container.xml")){e.next=3;break}throw new Error("No container file in archive");case 3:return e.next=5,n.async("text");case 5:if(r=e.sent,(a=M.a.parse(r,{ignoreAttributes:!1})).container.rootfiles&&a.container.rootfiles.rootfile){e.next=9;break}throw new Error("No rootfiles found");case 9:if("application/oebps-package+xml"===(c=a.container.rootfiles.rootfile)["@_media-type"]){e.next=12;break}throw new Error("Rootfile in unknown format");case 12:if(o=c["@_full-path"]){e.next=15;break}throw new Error("Empty rootfile");case 15:if(i=L(t,o)){e.next=18;break}throw new Error("Rootfile not found from archive");case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){return U.apply(this,arguments)}function U(){return(U=Object(_.a)(w.a.mark((function e(t,n){var r,a,c,o,i,s,l,u,f,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.async("text");case 2:return r=e.sent,a=M.a.parse(r,{attributeNamePrefix:"",attrNodeName:"attr",textNodeName:"value",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0}),c=A(a),o=V(a),i=H(a),s=q(a),l=G(i,o),e.next=11,Y(t,n,l);case 11:return u=e.sent,f=K(i,s),e.next=15,Q(t,n,f);case 15:return d=e.sent,e.abrupt("return",{cover:d,metadata:c,items:u});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){for(var t={},n=e.package.attr["unique-identifier"],r=0,a=Object.entries(e.package.metadata);r<a.length;r++){var c=a[r];if(c){var o=Object(d.a)(c,2),i=o[0],s=o[1];if(s){var l=null;if("identifier"===i){if(l=s,Array.isArray(s)?(l=s.find((function(e){return e.attr.id===n})))&&(l=l.value):l=s.value,!l)throw new Error("Cannot determine book unique identifier");l=String(l).replace("urn:uuid:","").toUpperCase().trim()}else l="object"===typeof s?s.value:s;t[i]=l}}}return t}function V(e){var t={items:[]};if("id"in e.package.spine.attr&&(t.id=e.package.spine.attr.id),"page-progression-direction"in e.package.spine.attr&&(t.direction=e.package.spine.attr["page-progression-direction"]),"toc"in e.package.spine.attr&&(t.toc=e.package.spine.attr.toc),Array.isArray(e.package.spine.itemref)){var n,r=Object(k.a)(e.package.spine.itemref);try{for(r.s();!(n=r.n()).done;){var a,c=n.value;null===(a=t.items)||void 0===a||a.push(c.attr.idref)}}catch(i){r.e(i)}finally{r.f()}}else{var o;null===(o=t.items)||void 0===o||o.push(e.package.spine.itemref.attr.idref)}return t}function H(e){var t,n=[],r=Object(k.a)(e.package.manifest.item);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.attr)}}catch(c){r.e(c)}finally{r.f()}return n}function q(e){if(e.package.guide&&"string"!==typeof e.package.guide)return e.package.guide.reference.attr}function K(e,t){if(t&&"cover"===t.type)return t;var n,r=Object(k.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.id.includes("cover.jpg"))return a}}catch(c){r.e(c)}finally{r.f()}}function G(e,t){var n,r=[],a=Object(k.a)(t.items);try{var c=function(){var t=n.value,a=e.find((function(e){return e.id===t}));a&&"application/xhtml+xml"===a["media-type"]&&r.push(a)};for(a.s();!(n=a.n()).done;)c()}catch(o){a.e(o)}finally{a.f()}return r}function Q(e,t,n){return X.apply(this,arguments)}function X(){return(X=Object(_.a)(w.a.mark((function e(t,n,r){var a,c,o,i,s,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:return a=null===n||void 0===n?void 0:n.name.split("/"),c=Object(d.a)(a,2),o=c[0],c[1],i=[o,r.href].join("/"),e.next=6,t.files[i].async("blob");case 6:if(s=e.sent,l=r["media-type"]||B.a.lookup(r.href)){e.next=10;break}return e.abrupt("return",s);case 10:return e.abrupt("return",s.slice(0,s.size,l));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,n){return Z.apply(this,arguments)}function Z(){return(Z=Object(_.a)(w.a.mark((function e(t,n,r){var a,c,o,i,s,l,u,f,b,p,v;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null===n||void 0===n?void 0:n.name.split("/"),c=Object(d.a)(a,2),o=c[0],c[1],i=[],s=Object(k.a)(r);try{for(s.s();!(l=s.n()).done;)u=l.value.href,f=[o,u].join("/"),i.push(t.files[f].async("text"))}catch(j){s.e(j)}finally{s.f()}return b=new DOMParser,e.next=7,Promise.all(i);case 7:return p=e.sent,v=p.map((function(e){var t,n;return z.tokenize(((null===(t=b.parseFromString(e,"application/xhtml+xml").body.textContent)||void 0===t||null===(n=t.trimStart())||void 0===n?void 0:n.trimEnd())+".").split("\n").join(". ")).map((function(e){return e.replaceAll(". .",".")})).filter((function(e){return"."!==e}))})).reduce((function(e,t){return[].concat(Object(g.a)(e),Object(g.a)(t))}),[]),e.abrupt("return",v);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(_.a)(w.a.mark((function e(t){var n,r,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/epub+zip"===t.type){e.next=2;break}throw new Error("Not an Epub file");case 2:return n=new N.a,e.next=5,n.loadAsync(t);case 5:if(r=e.sent,0!==Object.keys(r.files).length){e.next=8;break}throw new Error("No files in archive");case 8:return e.next=10,R(r);case 10:return e.next=12,D(r);case 12:return a=e.sent,e.next=15,J(r,a);case 15:return c=e.sent,e.abrupt("return",c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function(e){return $.apply(this,arguments)},te=b(),ne=Object(d.a)(te,2),re=ne[0],ae=ne[1],ce=function(e){var t=e.children,n=Object(r.useState)(!0),a=Object(d.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)([]),s=Object(d.a)(i,2),l=s[0],f=s[1];Object(r.useEffect)((function(){Object(_.a)(w.a.mark((function e(){var t,n,r,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.getItem("library");case 2:t=e.sent,f(t||[]),n=Object(k.a)(t||[]),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=15;break}return a=r.value,e.next=11,C.a.getItem("".concat(a.id,"_cover"));case 11:(c=e.sent)&&(a.cover=URL.createObjectURL(c));case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),n.e(e.t0);case 20:return e.prev=20,n.f(),e.finish(20);case 23:o(!1);case 24:case"end":return e.stop()}}),e,null,[[5,17,20,23]])})))()}),[]);var b=Object(r.useCallback)(function(){var e=Object(_.a)(w.a.mark((function e(t){var n,r,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Array.from(t).map((function(e){return ee(e)})));case 2:return n=e.sent,r=n.map((function(e){var t=e.items.reduce((function(e,t){return e+t.split(" ").length}),0),n={id:e.metadata.identifier,title:e.metadata.title||"",creator:e.metadata.creator||"",cover:!!e.cover,totalWords:t,totalSentences:e.items.length};return{id:n.id,info:n,items:e.items,cover:e.cover,coverUrl:!!e.cover&&URL.createObjectURL(e.cover)}})),e.next=6,Promise.all(r.map((function(e){var t=e.id,n=e.items;return C.a.setItem(t,n)})));case 6:return console.log(r),a=[].concat(Object(g.a)(l),Object(g.a)(r.map((function(e){return e.info})))),e.next=10,C.a.setItem("library",a);case 10:return e.next=12,Promise.all(r.filter((function(e){return!!e.cover})).map((function(e){var t=e.id,n=e.cover;return C.a.setItem("".concat(t,"_cover"),n)})));case 12:f([].concat(Object(g.a)(l),Object(g.a)(r.map((function(e){var t=e.info,n=e.coverUrl;return Object(u.a)(Object(u.a)({},t),{},{cover:n})})))));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),v=Object(r.useCallback)((function(e){}),[]),j=Object(r.useCallback)(function(){var e=Object(_.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.getItem(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return n=e.t0,r=l.find((function(e){return e.id===t})),e.abrupt("return",{info:r,items:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]);return c?null:Object(p.jsx)(ae,{value:{library:l,loadBooks:b,deleteBook:v,getBook:j},children:t})},oe=b(),ie=Object(d.a)(oe,2),se=ie[0],le=ie[1],ue=function(e){var t=e.children,n=Object(r.useCallback)((function(e){var t=localStorage.getItem(e);if(!t){var n={currentWordIndex:0,currentSentenceIndex:0};return localStorage.setItem(e,JSON.stringify(n)),n}return JSON.parse(t)}),[]),a=Object(r.useCallback)((function(e,t){var n=localStorage.getItem(e);n&&localStorage.setItem(e,JSON.stringify(Object(u.a)(Object(u.a)({},JSON.parse(n)),{},{currentWordIndex:t})))}),[]),c=Object(r.useCallback)((function(e,t){var n=localStorage.getItem(e);if(!n)return 0;var r=JSON.parse(n),a=r.currentWordIndex+t;return localStorage.setItem(e,JSON.stringify({currentBookStat:r,currentWordIndex:a})),a}),[]),o=Object(r.useCallback)((function(e,t){var n=localStorage.getItem(e);n&&localStorage.setItem(e,JSON.stringify(Object(u.a)(Object(u.a)({},JSON.parse(n)),{},{currentSentenceIndex:t})))}),[]),i=Object(r.useCallback)((function(e,t){var n=localStorage.getItem(e);if(!n)return 0;var r=JSON.parse(n),a=r.currentSentenceIndex+t;return localStorage.setItem(e,JSON.stringify({currentBookStat:r,currentSentenceIndex:a})),a}),[]);return Object(p.jsx)(le,{value:{getBookStats:n,setBookCurrentWordIndex:a,updateBookCurrentWordIndex:c,setBookSentenceWordIndex:o,updateBookSentenceWordIndex:i},children:t})},fe=function(e){var t=e.children;return Object(p.jsx)(s.a,{children:Object(p.jsx)(x,{children:Object(p.jsx)(ue,{children:Object(p.jsx)(ce,{children:t})})})})},de=n(40),be=n.n(de),pe=n(27),ve=n.n(pe),je=n(43),me=n(41),Oe=n(23),he=n.n(Oe),xe=document.createElement("canvas").getContext("2d");var ge=function(){return Object(r.useCallback)((function(e,t,n){xe.font="".concat(t,"px ").concat(e);var r=xe.measureText(n);return Math.abs(r.actualBoundingBoxLeft)+Math.abs(r.actualBoundingBoxRight)}),[])};var ye=function(e){var t=e.style,n=e.data,r=e.index;return Object(p.jsx)("div",{className:ve()(he.a.sentenceRow,Object(l.a)({},he.a.selected,r===n.currentIndex)),onClick:function(){return n.onSentenceClick(r)},style:t,children:n.sentences[r]})};var we=function(e){var t=e.fontFamily,n=void 0===t?"Kazemir":t,a=e.fontSize,c=void 0===a?16:a,o=e.sentences,i=e.currentIndex,s=e.onSentenceClick,l=Object(r.useState)(c),u=Object(d.a)(l,2),f=u[0],b=u[1];Object(r.useEffect)((function(){b(function(e,t){var n=document.createElement("DIV");n.id="__textMeasure",n.innerHTML="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ ",n.style.position="absolute",n.style.top="-500px",n.style.left="0",n.style.fontFamily=e,n.style.fontSize=t+"px",document.body.appendChild(n);var r=n.offsetHeight;return document.body.removeChild(n),r}(n,c))}),[n,c]),function(){var e=document.createElement("div");e.style.fontFamily="Kazemir",e.style.fontSize="16px",e.style.display="block",e.innerText="Today he was particularly nervous and worried because something had gone seriously wrong with his job,  which was to see that Arthur Dent\u2019s house got cleared out of the  way before the day was out"}();var v=ge(),j=Object(r.useCallback)((function(e,t){return 2===t&&console.log(Math.ceil(v(n,c,o[t]))/e),Math.ceil((Math.ceil(v(n,c,o[t])/e)+1)*f)}),[o,c,n,v]),m=Object(r.useMemo)((function(){return{sentences:o,currentIndex:i,onSentenceClick:s}}),[o,i,s]);return Object(p.jsx)("div",{className:he.a.container,style:{fontFamily:n,fontSize:"".concat(c,"px")},children:Object(p.jsx)("div",{className:he.a.b,children:Object(p.jsx)(me.a,{onResize:function(){return console.log("resize")},children:function(e){var t=e.height,n=e.width;return Object(p.jsx)(je.a,{height:t,width:n,itemData:m,estimatedItemSize:1.4*c,itemSize:j.bind(null,n),itemCount:o.length,className:he.a.list,overscanCount:20,children:ye})}})})})};n(71);var ke=function(e){var t=e.word,n=function(e){for(var t=e.length;-1!=='\n,.?!:;"'.indexOf(e[--t]););switch(++t){case 0:case 1:return 0;case 2:case 3:return 1;default:return Math.floor(t/2)-1}}(t),r=t.length,a="",c="";return 2===r?c="\xa0":1===r||3===r||(a="".padStart(r%2?Math.floor(r/2)-n+1:Math.floor(r/2)-n,"\xa0")),Object(p.jsxs)("div",{className:"word",children:[a+t.substr(0,n),Object(p.jsx)("span",{className:"selected",children:t.substr(n,1)}),t.substr(n+1)+c]})},_e=n(42),Se=n.n(_e),Ce=Number.MAX_SAFE_INTEGER;var Ie=function(e,t,n){var a=(new Date).getTime(),c=Object(r.useState)(a),o=Object(d.a)(c,2)[1],i=Object(r.useState)(Ce),s=Object(d.a)(i,2),l=s[0],u=s[1];Object(r.useEffect)((function(){if(e){var n=(new Date).getTime(),r=t?Math.max(n,n):Ce;u(r)}else u(Ce)}),[e,t]),Object(r.useEffect)((function(){var r;if(t&&e){var c=Math.max(0,Math.floor((a-l)/t));if(c%2!==1)if(a>=l){var i=0;if("function"===typeof n)try{i=n()||0}catch(d){console.error(d)}var s=c*t,f=Math.max(a,l+t+s+i);u(f),r=setTimeout((function(){o((new Date).getTime())}),Math.max(f-(new Date).getTime(),1))}else l<Ce&&(r=setTimeout((function(){o((new Date).getTime())}),Math.max(l-(new Date).getTime(),1)));else r=setTimeout((function(){o((new Date).getTime())}),20)}return function(){clearTimeout(r)}}),[a,l,e,t,n])},Ne=function(e){var t=e.isPlaying,n=e.bookText,a=e.currentWordIndex,c=e.onPlayerClick,o=e.onTick,i=O().settings,s=Object(r.useCallback)((function(){t&&c()}),[t,c]),l=Object(r.useCallback)((function(){var e=o();return 20*Math.max(0,n[e].length-10)}),[o,n]),u=60/i.wordsPerMinute*1e3;return Ie(t,u,l),Object(p.jsx)("div",{className:Se.a.container,style:{fontFamily:i.font,fontSize:"".concat(i.fontSize,"px")},onClick:s,children:Object(p.jsx)(ke,{word:n[a]})})};function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Me(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ee=r.createElement("path",{fill:"currentColor",d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"});function Be(e,t){var n=e.title,a=e.titleId,c=Me(e,["title","titleId"]);return r.createElement("svg",Pe({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"minus",className:"svg-inline--fa fa-minus fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Ee)}var We=r.forwardRef(Be);n.p;function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Le(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Re=r.createElement("path",{fill:"currentColor",d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"});function Te(e,t){var n=e.title,a=e.titleId,c=Le(e,["title","titleId"]);return r.createElement("svg",ze({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"plus",className:"svg-inline--fa fa-plus fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Re)}var De=r.forwardRef(Te),Fe=(n.p,n(13)),Je=n.n(Fe);function Ue(e,t){return(t/e*100).toFixed(1)}function Ae(e,t,n){return function(e){var t=e,n=Math.floor((t%=31536e3)/86400);if(n)return n+" d";var r=Math.floor((t%=86400)/3600);if(r)return r+" h";var a=Math.floor((t%=3600)/60);if(a)return a+" m";var c=t%60;return c?c+" s":""}(Math.floor((e-t)/(n/60)))}var Ve=function(e){var t=e.isPlaying,n=e.togglePlay,a=e.onChangeSpeed,c=e.wordsCount,o=e.currentIndex,i=e.wordsPerMinute,s=Ue(c,o),l=Ae(c,o,i),u=Object(r.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),a(-20)}),[a]),f=Object(r.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),a(20)}),[a]);return t?null:Object(p.jsxs)("div",{className:Je.a.container,onClick:n,children:[Object(p.jsx)("div",{className:Je.a.topLine}),Object(p.jsxs)("div",{className:Je.a.controls,children:[Object(p.jsx)(We,{className:Je.a.button,onClick:u}),Object(p.jsxs)("div",{className:Je.a.wordsPerMinute,children:[i," ",Object(p.jsx)("br",{})," word/m"]}),Object(p.jsx)(De,{className:Je.a.button,onClick:f})]}),Object(p.jsxs)("div",{className:Je.a.stats,children:[Object(p.jsx)("div",{className:Je.a.bar,style:{"--total":"".concat(s,"%")}}),Object(p.jsxs)("div",{className:Je.a.bottom,children:[Object(p.jsx)("div",{children:l}),Object(p.jsxs)("div",{children:[s,"%"]})]})]})]})};function He(){return(He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ke=r.createElement("path",{fill:"currentColor",d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"});function Ge(e,t){var n=e.title,a=e.titleId,c=qe(e,["title","titleId"]);return r.createElement("svg",He({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"cog",className:"svg-inline--fa fa-cog fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Ke)}var Qe=r.forwardRef(Ge);n.p;function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ze=r.createElement("path",{fill:"currentColor",d:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"});function $e(e,t){var n=e.title,a=e.titleId,c=Ye(e,["title","titleId"]);return r.createElement("svg",Xe({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"angle-left",className:"svg-inline--fa fa-angle-left fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Ze)}var et=r.forwardRef($e),tt=(n.p,n(33)),nt=n.n(tt),rt=function(e){e.isPlaying;var t=e.title,n=Object(i.f)(),a=Object(r.useCallback)((function(){return n.goBack()}),[n]);return Object(p.jsxs)("div",{className:nt.a.container,children:[Object(p.jsx)(et,{onClick:a}),Object(p.jsx)("div",{className:nt.a.title,children:t}),Object(p.jsx)(Qe,{})]})};var at=function(){var e=Object(i.g)().id,t=function(e){var t=re().getBook,n=Object(r.useState)(null),a=Object(d.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){t(e).then((function(e){var t=e.info,n=e.items;o({info:t,items:n,text:n.join(" ").split(" ")})}))}),[e,t]),c}(e),n=O(),a=n.settings,c=n.updateWordsPerMinute,o=function(e){var t=se(),n=t.getBookStats,a=t.updateBookCurrentWordIndex,c=t.setBookSentenceWordIndex,o=t.setBookCurrentWordIndex,i=Object(r.useState)({currentWordIndex:0,currentSentenceIndex:0}),s=Object(d.a)(i,2),l=s[0],u=s[1];return Object(r.useEffect)((function(){u(n(e))}),[n,e]),{stats:l,setStats:u,updateBookCurrentWordIndex:a,setBookSentenceWordIndex:c,setBookCurrentWordIndex:o}}(e),s=o.stats,l=o.setStats,f=o.updateBookCurrentWordIndex,b=o.setBookSentenceWordIndex,v=o.setBookCurrentWordIndex,j=Object(r.useState)(!1),m=Object(d.a)(j,2),h=m[0],x=m[1],g=Object(r.useCallback)((function(){var t=f(e,1);return l((function(e){return Object(u.a)(Object(u.a)({},e),{},{currentWordIndex:t})})),t}),[e,l,f]),y=Object(r.useCallback)((function(){return x((function(e){return!e}))}),[]),w=Object(r.useCallback)((function(n){if(t){var r=t.items.slice(0,n).join(" ").split(" ").length-1;l((function(e){return Object(u.a)(Object(u.a)({},e),{},{currentSentenceIndex:n,currentWordIndex:r})})),b(e,n),v(e,r)}}),[b,l,t,e]);return t?Object(p.jsxs)("div",{className:be.a.container,children:[Object(p.jsx)(rt,{isPlaying:h,title:t.info.title||""}),h?Object(p.jsx)(Ne,{isPlaying:h,bookText:t.text,currentWordIndex:s.currentWordIndex,onPlayerClick:y,onTick:g}):Object(p.jsx)(we,{sentences:t.items,currentIndex:s.currentSentenceIndex,onSentenceClick:w}),Object(p.jsx)(Ve,{isPlaying:h,currentIndex:s.currentWordIndex,onChangeSpeed:c,togglePlay:y,wordsCount:t.info.totalWords,wordsPerMinute:a.wordsPerMinute})]}):null},ct=n(14),ot=n.n(ct);var it=function(e){var t,n=e.book,a=e.stats,c=(e.onClick,Object(r.useRef)(null));return Ue(1500,1e3),Ae(1500,1e3,320),console.log(n),Object(p.jsxs)(s.b,{to:"/book/".concat(n.id),className:ot.a.container,children:[Object(p.jsx)("div",{className:ve()(ot.a.book,ot.a.nocover,(t={},Object(l.a)(t,ot.a.nocover,!n.cover),Object(l.a)(t,ot.a.nocover,n.cover),t)),children:(n.cover||!n.cover)&&Object(p.jsxs)("div",{ref:c,className:ot.a.bookWrapper,children:[Object(p.jsx)("svg",{children:Object(p.jsx)("foreignObject",{x:"0",y:"0",width:"100%",height:"100%",children:Object(p.jsx)("div",{className:ot.a.title,children:n.title})})}),Object(p.jsx)("svg",{children:Object(p.jsx)("foreignObject",{x:"0",y:"50%",width:"100%",height:"100%",children:Object(p.jsx)("div",{className:ot.a.author,children:n.creator})})})]})}),Object(p.jsxs)("div",{className:ot.a.bottom,children:[Object(p.jsx)("div",{children:"100"!==a.completed?"".concat(a.completed," %"):"FINISHED"}),Object(p.jsx)("div",{children:a.timeToRead})]})]})},st=n(18),lt=n.n(st);var ut=function(e,t){return Object(r.useCallback)((function(){var e=document.createElement("input");e.type="file",e.multiple=!0,e.onchange=function(e){if(!e.target||0===e.target.files.length)return t([]);t(e.target.files)},e.click()}),[t])},ft=function(){var e=re(),t=e.library,n=e.loadBooks,a=(se().getBookStats,ut({multiple:!0},function(){var e=Object(_.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c=Object(r.useCallback)((function(e){}),[]);return Object(p.jsxs)("div",{className:lt.a.container,children:[Object(p.jsxs)("div",{className:lt.a.header,children:[Object(p.jsx)("div",{className:lt.a.title,children:"Library"}),Object(p.jsx)("div",{className:lt.a.add,onClick:a,children:Object(p.jsx)(De,{})})]}),Object(p.jsx)("div",{className:lt.a.listContainer,children:Object(p.jsx)("div",{className:lt.a.list,children:t.map((function(e){return Object(p.jsx)(it,{book:e,stats:{completed:"100",timeToRead:"1"},onClick:c},e.id)}))})}),Object(p.jsxs)("div",{className:lt.a.bottomMenu,children:[Object(p.jsx)("div",{children:"Library"}),Object(p.jsx)("div",{children:"Settings"})]})]})};n(72);var dt=function(){return Object(p.jsx)(fe,{children:Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{path:"/book/:id",component:at}),Object(p.jsx)(i.a,{path:"/",component:ft})]})})},bt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(dt,{})}),document.getElementById("root")),bt()}},[[73,1,2]]]);
//# sourceMappingURL=main.7bbafd3b.chunk.js.map