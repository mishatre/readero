(this.webpackJsonpreadero=this.webpackJsonpreadero||[]).push([[0],{12:function(e,t,r){e.exports={container:"styles_container__37Pj3",book:"styles_book__MO8h4",bookWrapper:"styles_bookWrapper__1h3J3",title:"styles_title__1byxz",author:"styles_author__1tkc1",nocover:"styles_nocover__3cf5z",bottom:"styles_bottom__lO9CU"}},13:function(e,t,r){e.exports={container:"styles_container__1Ej-K",header:"styles_header__2qrGJ",title:"styles_title__uPFBr",add:"styles_add__Ar1JF",listContainer:"styles_listContainer__ah3i7",list:"styles_list__2-5po",bottomMenu:"styles_bottomMenu__2VOH0"}},43:function(e,t,r){},50:function(e,t,r){},64:function(e,t,r){},65:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(30),c=r.n(i),o=(r(43),r(3)),s=r(17),l=r(37),u=r(38),f=r(2),b=r.n(f),d=r(6),p=r(5);var h=r(15),v=r.n(h),j=r(1),m={font:"Helvetica",fontSize:16,wordsPerMinute:320},O=function(){var e=Object(n.createContext)(void 0);return[function(){var t=Object(n.useContext)(e);if(void 0===t)throw new Error("useCtx must be inside a Provider with a value");return t},e.Provider]}(),x=Object(p.a)(O,2),y=x[0],g=x[1],w=function(e){var t=e.children,r=Object(n.useState)(!1),a=Object(p.a)(r,2),i=a[0],c=a[1],o=Object(n.useState)(m),s=Object(p.a)(o,2),f=s[0],h=s[1],O=Object(n.useState)([]),x=Object(p.a)(O,2),y=x[0],w=x[1],k=Object(n.useCallback)(Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getItem("settings");case 2:if(t=e.sent){e.next=9;break}return e.next=6,v.a.setItem("settings",m);case 6:h(m),e.next=10;break;case 9:h(t);case 10:case"end":return e.stop()}}),e)}))),[]),_=Object(n.useCallback)(Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getItem("library");case 2:t=e.sent,w(t||[]),c(!0);case 5:case"end":return e.stop()}}),e)}))),[]),E=Object(n.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t){var r,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.find((function(e){return e.id===t.id}))){e.next=4;break}return console.log("Book already exist"),e.abrupt("return");case 4:return r=t.content,t.cover,n=Object(u.a)(t,["content","cover"]),a=[].concat(Object(l.a)(y),[n]),e.next=8,v.a.setItem("library",a);case 8:return w(a),e.next=11,v.a.setItem(t.id,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y]),C=Object(n.useCallback)((function(e){}),[]),N=Object(n.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getItem(t);case 2:return r=e.sent,n=y.find((function(e){return e.id===t})),e.abrupt("return",{info:n,content:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y]);return Object(n.useEffect)((function(){k(),_()}),[k,_]),Object(j.jsx)(g,{value:{loaded:i,library:y,settings:f,addBook:E,removeBook:C,getBookContent:N},children:t})},k=function(e){var t=e.children;return Object(j.jsx)(s.a,{children:Object(j.jsx)(w,{children:t})})};r(50);var _=function(e){var t=e.word,r=function(e){for(var t=e.length;-1!=='\n,.?!:;"'.indexOf(e[--t]););switch(++t){case 0:case 1:return 0;case 2:case 3:return 1;default:return Math.floor(t/2)-1}}(t),n=t.length,a="",i="";return 2===n?i="\xa0":1===n||3===n||(a="".padStart(n%2?Math.floor(n/2)-r+1:Math.floor(n/2)-r,"\xa0")),Object(j.jsxs)("div",{className:"word",children:[a+t.substr(0,r),Object(j.jsx)("span",{className:"selected",children:t.substr(r,1)}),t.substr(r+1)+i]})};function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var N=n.createElement("path",{fill:"currentColor",d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"});function M(e,t){var r=e.title,a=e.titleId,i=C(e,["title","titleId"]);return n.createElement("svg",E({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"cog",className:"svg-inline--fa fa-cog fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,N)}var S=n.forwardRef(M);r.p;function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var I=n.createElement("path",{fill:"currentColor",d:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"});function B(e,t){var r=e.title,a=e.titleId,i=P(e,["title","titleId"]);return n.createElement("svg",F({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"angle-left",className:"svg-inline--fa fa-angle-left fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,I)}var T=n.forwardRef(B);r.p;function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var z=n.createElement("path",{fill:"currentColor",d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"});function D(e,t){var r=e.title,a=e.titleId,i=R(e,["title","titleId"]);return n.createElement("svg",L({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"play",className:"svg-inline--fa fa-play fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,z)}var A=n.forwardRef(D);r.p;function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var J=n.createElement("path",{fill:"currentColor",d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"});function W(e,t){var r=e.title,a=e.titleId,i=H(e,["title","titleId"]);return n.createElement("svg",V({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"pause",className:"svg-inline--fa fa-pause fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,J)}var G=n.forwardRef(W);r.p;function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var q=n.createElement("path",{fill:"currentColor",d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"});function K(e,t){var r=e.title,a=e.titleId,i=X(e,["title","titleId"]);return n.createElement("svg",U({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"minus",className:"svg-inline--fa fa-minus fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,q)}var Y=n.forwardRef(K);r.p;function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var $=n.createElement("path",{fill:"currentColor",d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"});function ee(e,t){var r=e.title,a=e.titleId,i=Z(e,["title","titleId"]);return n.createElement("svg",Q({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"plus",className:"svg-inline--fa fa-plus fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,$)}var te=n.forwardRef(ee),re=(r.p,r(9)),ne=r.n(re),ae=Number.MAX_SAFE_INTEGER;function ie(e){var t=e,r=Math.floor((t%=31536e3)/86400);if(r)return r+" d";var n=Math.floor((t%=86400)/3600);if(n)return n+" h";var a=Math.floor((t%=3600)/60);if(a)return a+" m";var i=t%60;return i?i+" s":"0"}var ce=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),r=t[0],a=t[1],i=Object(n.useState)([]),c=Object(p.a)(i,2),s=c[0],l=c[1],u=Object(o.f)().id,f=y(),b=f.loaded,d=f.getBookContent,h=Object(n.useState)(""),v=Object(p.a)(h,2),m=v[0],O=v[1];Object(n.useEffect)((function(){b&&d(u).then((function(e){var t=e.info,r=e.content;O(t.title),a(r),l(r.split(" "))}))}),[b,u]);var x=Object(n.useState)(320),g=Object(p.a)(x,2),w=g[0],k=g[1],E=Object(n.useState)(!1),C=Object(p.a)(E,2),N=C[0],M=C[1],F=Object(n.useState)(0),P=Object(p.a)(F,2),I=P[0],B=P[1],L=function(e){var t=(new Date).getTime(),r=Object(n.useState)(!1),a=Object(p.a)(r,2),i=a[0],c=a[1],o=Object(n.useState)(t),s=Object(p.a)(o,2)[1],l=Object(n.useState)(ae),u=Object(p.a)(l,2),f=u[0],b=u[1],d=Object(n.useCallback)((function(){return i}),[i]),h=Object(n.useCallback)((function(){return!d()}),[d]),v=Object(n.useCallback)((function(){var t=(new Date).getTime(),r=e.delay?Math.max(t,t):ae;b(r),c(!0)}),[e.delay]),j=Object(n.useCallback)((function(){b(ae),c(!1)}),[]);return Object(n.useEffect)((function(){var r;if(e.delay&&!h()){var n=Math.max(0,Math.floor((t-f)/e.delay));if(n%2!==1)if(t>=f){if("function"===typeof e.callback)try{e.callback()}catch(c){console.error(c)}var a=n*e.delay,i=Math.max(t,f+e.delay+a);b(i),r=setTimeout((function(){s((new Date).getTime())}),Math.max(i-(new Date).getTime(),1))}else f<ae&&(r=setTimeout((function(){s((new Date).getTime())}),Math.max(f-(new Date).getTime(),1)));else r=setTimeout((function(){s((new Date).getTime())}),20)}return function(){clearTimeout(r)}}),[t,f,h,e.delay,e]),{start:v,stop:j}}({delay:60/w*1e3,callback:function(){B((function(e){return e+1}))}}),R=L.start,z=L.stop,D=Object(n.useCallback)((function(){return M((function(e){var t=!e;return t?R():z(),t}))}),[R,z]),V=Object(n.useCallback)((function(){return k((function(e){return e+20}))}),[]),H=Object(n.useCallback)((function(){return k((function(e){return e-20}))}),[]),J=Object(n.useCallback)((function(){D()}),[D]);return Object(j.jsxs)("div",{className:ne.a.container,children:[Object(j.jsxs)("div",{className:ne.a.header,children:[Object(j.jsx)(T,{}),Object(j.jsx)("div",{className:ne.a.title,children:m}),Object(j.jsx)(S,{})]}),!N&&Object(j.jsx)("div",{className:ne.a.textContainer,children:Object(j.jsx)("div",{className:ne.a.text,children:r})}),N&&Object(j.jsx)("div",{className:ne.a.textPlayer,onClick:J,children:Object(j.jsx)(_,{word:s[I]})}),Object(j.jsxs)("div",{className:ne.a.bottomMenu,children:[Object(j.jsx)("div",{children:ie(Math.floor((s.length-I)/(w/60)))}),Object(j.jsx)("div",{className:ne.a.controls,children:Object(j.jsxs)("div",{className:ne.a.speedButtons,children:[Object(j.jsx)("div",{className:ne.a.button,onClick:H,children:Object(j.jsx)(Y,{})}),Object(j.jsxs)("div",{className:ne.a.button,onClick:D,children:[N?Object(j.jsx)(G,{}):Object(j.jsx)(A,{})," ",w]}),Object(j.jsx)("div",{className:ne.a.button,onClick:V,children:Object(j.jsx)(te,{})})]})}),Object(j.jsxs)("div",{children:[(I/s.length*100).toFixed(1)," %"]})]})]})},oe=r(32),se=r(23),le=r(33),ue=r.n(le),fe=r(12),be=r.n(fe);var de=function(e){var t=e.id,r=e.title,n=e.author,a=e.completed,i=e.ttc,c=e.cover;return Object(j.jsxs)(s.b,{to:"/book/".concat(t),className:be.a.container,children:[Object(j.jsx)("div",{className:ue()(be.a.book,Object(se.a)({},be.a.nocover,!c)),style:c?{background:"url(".concat(c,")"),backgroundSize:"cover"}:{},children:Object(j.jsxs)("div",{className:be.a.bookWrapper,children:[!c&&Object(j.jsx)("div",{className:be.a.title,children:r}),!c&&Object(j.jsx)("div",{className:be.a.author,children:n})]})}),Object(j.jsxs)("div",{className:be.a.bottom,children:[Object(j.jsxs)("div",{children:[a,"%"]}),Object(j.jsx)("div",{children:i})]})]})},pe=r(13),he=r.n(pe),ve=r(21),je=r(34),me=r(35),Oe=r(36),xe=r.n(Oe),ye=r(28),ge=r.n(ye),we=new xe.a,ke=function(){function e(t){Object(je.a)(this,e),this.data=t,this.cover=null,this.metadata={},this.flow=[],this.items=[],this.compiled="",this.containerFile=null,this.mimeFile=null,this.rootFile=null,this.file=void 0,"application/epub+zip"===t.type||console.log(new Error("Not an Epub file"))}return Object(me.a)(e,[{key:"parse",value:function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"open",value:function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.loadAsync(this.data);case 2:if(this.file=e.sent,0!==Object.keys(this.file.files).length){e.next=6;break}return console.log(new Error("No files in archive")),e.abrupt("return");case 6:return e.next=8,this.validateMimeTipe();case 8:return e.next=10,this.validateRootFiles();case 10:return e.next=12,this.parseRootFile();case 12:return e.next=14,this.compileText();case 14:return e.abrupt("return",this.file);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findFile",value:function(e){var t=this.file.filter((function(t,r){return r.name.toLowerCase()===e.toLowerCase()}));return 0===t.length?null:t[0]}},{key:"validateMimeTipe",value:function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mimeFile=this.findFile("mimetype"),this.mimeFile){e.next=4;break}return console.log(new Error("No mimetype file in archive")),e.abrupt("return");case 4:return e.next=6,this.mimeFile.async("text");case 6:if("application/epub+zip"===e.sent.toLowerCase().trim()){e.next=10;break}return console.log(new Error("Unsupported mime type")),e.abrupt("return");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateRootFiles",value:function(){var e=Object(d.a)(b.a.mark((function e(){var t,r,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.containerFile=this.findFile("meta-inf/container.xml"),this.containerFile){e.next=4;break}return console.log(new Error("No container file in archive")),e.abrupt("return");case 4:return e.next=6,this.containerFile.async("text");case 6:if(t=e.sent,(r=ge.a.parse(t,{ignoreAttributes:!1})).container.rootfiles&&r.container.rootfiles.rootfile){e.next=11;break}return console.log(new Error("No rootfiles found")),e.abrupt("return");case 11:if("application/oebps-package+xml"===(n=r.container.rootfiles.rootfile)["@_media-type"]){e.next=15;break}return console.log(new Error("Rootfile in unknown format")),e.abrupt("return");case 15:if(a=n["@_full-path"]){e.next=19;break}return console.log(new Error("Empty rootfile")),e.abrupt("return");case 19:if(this.rootFile=this.findFile(a),this.rootFile){e.next=23;break}return console.log(new Error("Rootfile not found from archive")),e.abrupt("return");case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseRootFile",value:function(){var e=Object(d.a)(b.a.mark((function e(){var t,r,n,a,i,c,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.rootFile){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.rootFile.async("text");case 4:t=e.sent,r=ge.a.parse(t,{ignoreAttributes:!1,ignoreNameSpace:!0,attributeNamePrefix:""}),n=0,a=Object.entries(r.package);case 7:if(!(n<a.length)){e.next=28;break}if(i=Object(p.a)(a[n],2),c=i[0],o=i[1],"metadata"!==c){e.next=13;break}this.parseMetadata(o),e.next=25;break;case 13:if("manifest"!==c){e.next=18;break}return e.next=16,this.parseManifest(o);case 16:e.next=25;break;case 18:if("spine"!==c){e.next=22;break}this.parseSpine(o),e.next=25;break;case 22:if("guide"!==c){e.next=25;break}return e.next=25,this.parseGuide(o);case 25:n++,e.next=7;break;case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMetadata",value:function(e){var t,r=Object(ve.a)(e.identifier);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.metadata.id=n["#text"];break}}catch(a){r.e(a)}finally{r.f()}this.metadata.creator=e.creator,this.metadata.title=e.title,this.metadata.description=e.description,this.metadata.date=e.date,this.metadata.language=e.language,this.metadata.publisher=e.publisher,this.metadata.title=e.title}},{key:"parseManifest",value:function(){var e=Object(d.a)(b.a.mark((function e(t){var r,n,a,i,c,o,s,l,u,f;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(n=null===(r=this.rootFile)||void 0===r?void 0:r.name.split("/"))||void 0===n||n.pop(),a={},i=Object(ve.a)(t.item),e.prev=4,i.s();case 6:if((c=i.n()).done){e.next=18;break}if("application/xhtml+xml"!==(o=c.value)["media-type"]){e.next=16;break}return s=null===n||void 0===n?void 0:n.concat([o.href]).join("/"),l=this.findFile(s),e.next=13,null===l||void 0===l?void 0:l.async("text");case 13:u=e.sent,f=(new DOMParser).parseFromString(u,"text/xml").documentElement.textContent,a[o.id]=null===f||void 0===f?void 0:f.trim();case 16:e.next=6;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),i.e(e.t0);case 23:return e.prev=23,i.f(),e.finish(23);case 26:this.items=a;case 27:case"end":return e.stop()}}),e,this,[[4,20,23,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"parseSpine",value:function(e){if(e.itemref){var t,r=Object(ve.a)(e.itemref);try{for(r.s();!(t=r.n()).done;){var n=t.value.idref;this.flow.push(n)}}catch(a){r.e(a)}finally{r.f()}}}},{key:"parseGuide",value:function(){var e=Object(d.a)(b.a.mark((function e(t){var r,n,a,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.reference&&"cover"===t.reference.type){e.next=2;break}return e.abrupt("return");case 2:if(null===(n=null===(r=this.rootFile)||void 0===r?void 0:r.name.split("/"))||void 0===n||n.pop(),null===n||void 0===n?void 0:n.join("/"),a=null===n||void 0===n?void 0:n.concat([t.reference.href]).join("/")){e.next=8;break}return e.abrupt("return");case 8:if(i=this.findFile(a)){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,i.async("blob");case 13:c=e.sent,this.cover=URL.createObjectURL(c);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"compileText",value:function(){var e=Object(d.a)(b.a.mark((function e(){var t,r,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=Object(ve.a)(this.flow);try{for(r.s();!(n=r.n()).done;)a=n.value,t.push(this.items[a])}catch(i){r.e(i)}finally{r.f()}this.compiled=t.join(" ");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();var _e=function(e,t){return Object(n.useCallback)((function(){var e=document.createElement("input");e.type="file",e.onchange=function(e){if(!e.target||0===e.target.files.length)return t([]);t(e.target.files)},e.click()}),[t])},Ee=function(){var e=y(),t=e.library,r=e.addBook,n=_e({},(function(e){if(0!==e.length){var t=e[0],n=new ke(t);n.parse().then((function(e){n.metadata.id&&r({id:n.metadata.id,title:n.metadata.title,author:n.metadata.creator,cover:n.cover||void 0,content:n.compiled})}))}}));return Object(j.jsxs)("div",{className:he.a.container,children:[Object(j.jsxs)("div",{className:he.a.header,children:[Object(j.jsx)("div",{className:he.a.title,children:"Library"}),Object(j.jsx)("div",{className:he.a.add,onClick:n,children:"+"})]}),Object(j.jsx)("div",{className:he.a.listContainer,children:Object(j.jsx)("div",{className:he.a.list,children:t.map((function(e){return Object(j.jsx)(de,Object(oe.a)({},e),e.id)}))})}),Object(j.jsxs)("div",{className:he.a.bottomMenu,children:[Object(j.jsx)("div",{children:"Library"}),Object(j.jsx)("div",{children:"Settings"})]})]})};r(64);var Ce=function(){return Object(j.jsx)(k,{children:Object(j.jsxs)(o.c,{children:[Object(j.jsx)(o.a,{path:"/book/:id",component:ce}),Object(j.jsx)(o.a,{path:"/",component:Ee})]})})},Ne=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,66)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),i(e),c(e)}))};c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(Ce,{})}),document.getElementById("root")),Ne()},9:function(e,t,r){e.exports={container:"styles_container__2yWX5",header:"styles_header__3WudI",title:"styles_title__1ADpo",textContainer:"styles_textContainer__cVkSs",textPlayer:"styles_textPlayer__3Nr3A",bottomMenu:"styles_bottomMenu__1zn0F",controls:"styles_controls__w_uLP",speedButtons:"styles_speedButtons__1IaYj",button:"styles_button__3bARj"}}},[[65,1,2]]]);
//# sourceMappingURL=main.a273be3f.chunk.js.map