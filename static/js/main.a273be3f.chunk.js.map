{"version":3,"sources":["Components/Book/styles.module.scss","Pages/Library/styles.module.scss","Providers/Storage/index.tsx","utils/context.ts","Providers/index.tsx","Components/SingleWordRender/index.tsx","assets/icons/cog-solid.svg","assets/icons/angle-left-solid.svg","assets/icons/play-solid.svg","assets/icons/pause-solid.svg","assets/icons/minus-solid.svg","assets/icons/plus-solid.svg","Pages/Reader/index.tsx","Components/Book/index.tsx","Libraries/epub.ts","hooks/useFileInput.ts","Pages/Library/index.tsx","App.tsx","reportWebVitals.ts","index.tsx","Pages/Reader/styles.module.scss"],"names":["module","exports","defaultSettings","font","fontSize","wordsPerMinute","ctx","createContext","undefined","c","useContext","Error","Provider","createCtx","useStorageContext","StorageProvider","children","useState","loaded","setLoaded","settings","setSettings","library","setLibrary","loadSettings","useCallback","a","localforage","getItem","data","setItem","loadLibrary","addBook","bookInfo","find","item","id","console","log","content","cover","info","updatedLibrary","removeBook","getBookContent","useEffect","value","Providers","Storage","SingleWordRender","word","split","length","indexOf","Math","floor","ORP","lpad","rpad","padStart","className","substr","_extends","Object","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","fill","d","SvgCogSolid","_ref","svgRef","title","titleId","props","focusable","role","xmlns","viewBox","ref","ForwardRef","SvgAngleLeftSolid","SvgPlaySolid","SvgPauseSolid","SvgMinusSolid","SvgPlusSolid","never","Number","MAX_SAFE_INTEGER","secondsToStr","seconds1","temp","days","hours","minutes","seconds","Reader","rawBookText","setRawBookText","bookText","setBookText","useParams","setTitle","then","speed","setSpeed","isPlaying","setPlaying","currentWordIndex","setCurrentWordIndex","options","now","Date","getTime","started","setStarted","setCheckTime","nextFireTime","setNextFireTime","isStarted","isStopped","start","currentTime","newNextFireTime","delay","max","stop","timeout","overdueCalls","callback","e","error","overdueElapsedTime","newFireTime","setTimeout","clearTimeout","useAccurateTimer","v","togglePlay","newValue","speedUp","curr","speedDown","onPlayerClick","styles","container","header","textContainer","text","textPlayer","onClick","bottomMenu","controls","speedButtons","button","toFixed","Book","author","completed","ttc","to","cn","book","nocover","style","background","backgroundSize","bookWrapper","bottom","zip","JsZip","EPub","metadata","flow","items","compiled","containerFile","mimeFile","rootFile","file","type","open","loadAsync","files","validateMimeTipe","validateRootFiles","parseRootFile","compileText","filename","result","filter","path","name","toLowerCase","findFile","async","trim","xmlData","parsedXML","parser","parse","ignoreAttributes","rootfiles","rootfile","rootFileInfo","XMLData","ignoreNameSpace","attributeNamePrefix","entries","package","parseMetadata","parseManifest","parseSpine","parseGuide","identifier","creator","description","date","language","publisher","manifest","pop","href","concat","join","r","DOMParser","parseFromString","documentElement","textContent","spine","itemref","idref","push","guide","reference","URL","createObjectURL","outputText","useFileInput","input","document","createElement","onchange","event","click","Library","onAdd","selectedFile","epub","res","add","listContainer","list","map","App","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a273be3f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__37Pj3\",\"book\":\"styles_book__MO8h4\",\"bookWrapper\":\"styles_bookWrapper__1h3J3\",\"title\":\"styles_title__1byxz\",\"author\":\"styles_author__1tkc1\",\"nocover\":\"styles_nocover__3cf5z\",\"bottom\":\"styles_bottom__lO9CU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1Ej-K\",\"header\":\"styles_header__2qrGJ\",\"title\":\"styles_title__uPFBr\",\"add\":\"styles_add__Ar1JF\",\"listContainer\":\"styles_listContainer__ah3i7\",\"list\":\"styles_list__2-5po\",\"bottomMenu\":\"styles_bottomMenu__2VOH0\"};","import createCtx from \"../../utils/context\";\nimport localforage from 'localforage';\nimport { useCallback, useEffect, useState } from \"react\";\n\ninterface IStorageProviderProps {\n    children: React.ReactNode;\n}\n\ninterface IStorageSettings {\n    font: string;\n    fontSize: number;\n    wordsPerMinute: number;\n}\n\ninterface IBookInfo {\n    id: string;\n    title: string;\n    author: string;\n\n    cover?: string;\n}\n\ninterface IBook {\n    id: string;\n    title: string;\n    author: string;\n    cover?: string;\n    ttc?: string;\n    completed?: number;\n}\n\ninterface IStorageContext {\n    loaded: boolean;\n\n    library: IBookInfo[];\n    settings: IStorageSettings;\n\n    addBook: (bookInfo: any) => void;\n    removeBook: (id: string) => void;\n\n    getBookContent: (id: string) => Promise<{ info: IBookInfo; content: string }>;\n}\n\nconst defaultSettings = {\n    font: 'Helvetica',\n    fontSize: 16,\n    wordsPerMinute: 320,\n}\n\nconst [useStorageContext, Provider] = createCtx<IStorageContext>();\n\nconst StorageProvider = ({ children }: IStorageProviderProps) => {\n\n    const [loaded, setLoaded] = useState(false);\n    const [settings, setSettings] = useState<IStorageSettings>(defaultSettings);\n    const [library, setLibrary] = useState<IBookInfo[]>([]);\n\n    const loadSettings = useCallback(async () => {\n        const data = await localforage.getItem('settings');\n        if(!data) {\n            await localforage.setItem('settings', defaultSettings);\n            setSettings(defaultSettings)\n        } else {\n            setSettings(data as IStorageSettings);\n        }\n    }, []);\n\n    const loadLibrary = useCallback(async () => {\n        const data = await localforage.getItem('library');\n        setLibrary(data as any || []);\n        setLoaded(true);\n    }, []);\n\n    // \n    const addBook = useCallback(async (bookInfo: any) => {\n\n        const bookExist = library.find((item) => item.id === bookInfo.id);\n        if(bookExist) {\n            console.log('Book already exist');\n            return;\n        }\n\n        const {content, cover, ...info} = bookInfo;\n\n        const updatedLibrary = [...library, info];\n        await localforage.setItem(\"library\", updatedLibrary);\n        setLibrary(updatedLibrary);\n\n        await localforage.setItem(bookInfo.id, content);\n\n    }, [library]);\n    const removeBook = useCallback((id: string) => {\n\n    }, []);\n\n    const getBookContent = useCallback(async (id: string) => {\n\n        const content = await localforage.getItem(id) as string;\n        const info = library.find((item) => item.id === id)!;\n\n        return {\n            info,\n            content\n        };\n\n    }, [library]);\n\n    useEffect(() => {\n        loadSettings();\n        loadLibrary();\n    }, [loadSettings, loadLibrary]);\n\n    return (\n        <Provider \n            value={{\n                loaded,\n\n                library,\n                settings,\n\n                addBook,\n                removeBook,\n\n                getBookContent,\n            }}\n        >\n            {children}\n        </Provider>\n    )\n};\n\nexport {\n    useStorageContext,\n}\n\nexport default StorageProvider;","\nimport { createContext, useContext } from \"react\";\n\nexport default function createCtx<A extends {} | null>() {\n    const ctx = createContext<A | undefined>(undefined);\n    function useCtx() {\n        const c = useContext(ctx);\n        if (c === undefined) {\n            throw new Error('useCtx must be inside a Provider with a value');\n        }\n        return c;\n    }\n    return [useCtx, ctx.Provider] as const;\n}","\nimport { BrowserRouter as Router, } from 'react-router-dom';\nimport StorageProvider from './Storage';\n\ninterface IProvidersProps { \n    children: React.ReactNode;\n}\n\nconst Providers = ({ children }: IProvidersProps) => {\n    return (\n        <Router>\n            <StorageProvider>\n                {children}\n            </StorageProvider>\n        </Router>\n    )\n}\n\nexport default Providers;","\nimport './styles.scss';\n\ninterface ISingleWordRender {\n    word: string;\n}\n\nfunction ORP(word: string){\n    var length = word.length;\n    while('\\n,.?!:;\"'.indexOf(word[--length]) !== -1);\n    switch(++length) {\n      case 0: case 1: return 0;\n      case 2: case 3: return 1;\n      default: return Math.floor(length / 2) - 1;\n    }\n}\n\nconst SingleWordRender = ({ word }: ISingleWordRender) => {\n\n    const split = ORP(word);\n    const length = word.length;\n    let lpad = '';\n    let rpad = '';\n\n    if (length === 2) {\n        rpad = \"\\u00A0\";\n    } else if (length === 1 || length === 3) {\n    } else if (length % 2) {\n        lpad = \"\".padStart(Math.floor(length / 2) - split + 1, \"\\u00A0\");\n    } else {\n        lpad = \"\".padStart(Math.floor(length / 2) - split, \"\\u00A0\");\n    }\n\n    return (\n        <div className=\"word\">\n            {lpad + word.substr(0, split)}\n            <span className=\"selected\">{word.substr(split, 1)}</span>\n            {word.substr(split + 1) + rpad}\n        </div>\n    );\n};\n\nexport default SingleWordRender;\n\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z\"\n});\n\nfunction SvgCogSolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"cog\",\n    className: \"svg-inline--fa fa-cog fa-w-16\",\n    role: \"img\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCogSolid);\nexport default __webpack_public_path__ + \"static/media/cog-solid.540ab5dc.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z\"\n});\n\nfunction SvgAngleLeftSolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"angle-left\",\n    className: \"svg-inline--fa fa-angle-left fa-w-8\",\n    role: \"img\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 256 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAngleLeftSolid);\nexport default __webpack_public_path__ + \"static/media/angle-left-solid.e6b3ab3d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z\"\n});\n\nfunction SvgPlaySolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"play\",\n    className: \"svg-inline--fa fa-play fa-w-14\",\n    role: \"img\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPlaySolid);\nexport default __webpack_public_path__ + \"static/media/play-solid.3c7578b0.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z\"\n});\n\nfunction SvgPauseSolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"pause\",\n    className: \"svg-inline--fa fa-pause fa-w-14\",\n    role: \"img\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPauseSolid);\nexport default __webpack_public_path__ + \"static/media/pause-solid.9df23b01.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z\"\n});\n\nfunction SvgMinusSolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"minus\",\n    className: \"svg-inline--fa fa-minus fa-w-14\",\n    role: \"img\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMinusSolid);\nexport default __webpack_public_path__ + \"static/media/minus-solid.4d0790fe.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z\"\n});\n\nfunction SvgPlusSolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"plus\",\n    className: \"svg-inline--fa fa-plus fa-w-14\",\n    role: \"img\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPlusSolid);\nexport default __webpack_public_path__ + \"static/media/plus-solid.c82024f4.svg\";\nexport { ForwardRef as ReactComponent };","import { useCallback, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useStorageContext } from \"../../Providers/Storage\";\n\nimport SingleWordRender from '../../Components/SingleWordRender';\n\nimport { ReactComponent as CogIcon } from '../../assets/icons/cog-solid.svg';\nimport { ReactComponent as AngleLeft } from '../../assets/icons/angle-left-solid.svg';\n\nimport { ReactComponent as PlayIcon } from '../../assets/icons/play-solid.svg';\nimport { ReactComponent as PauseIcon } from '../../assets/icons/pause-solid.svg';\nimport { ReactComponent as MinusIcon } from '../../assets/icons/minus-solid.svg';\nimport { ReactComponent as PlusIcon } from '../../assets/icons/plus-solid.svg';\n\nimport styles from './styles.module.scss';\n\ninterface TimerOptions {\n    delay: number;\n    callback: () => void;\n}\n\n/** Milliseconds representing forever in the future. */\nconst never = Number.MAX_SAFE_INTEGER;\n\nfunction useAccurateTimer(options: TimerOptions) {\n\n    const now = new Date().getTime();\n    const [started, setStarted] = useState(false);\n    // This is used to trigger a render that checks to fire the timer\n    const [, setCheckTime] = useState(now);\n    const [nextFireTime, setNextFireTime] = useState(never);\n\n    const isStarted = useCallback(() => started, [started]);\n    const isStopped = useCallback(() => !isStarted(), [isStarted]);\n\n    const start = useCallback(() => {\n        const currentTime = new Date().getTime();\n        const newNextFireTime = options.delay ? Math.max(currentTime, currentTime) : never;\n        setNextFireTime(newNextFireTime);\n        setStarted(true);\n    }, [options.delay]);\n\n    const stop = useCallback(() => {\n        setNextFireTime(never);\n        setStarted(false);\n    }, []);\n\n    useEffect(() => {\n\n        let timeout: NodeJS.Timeout;\n\n        // If it's a timer and it isn't paused...\n        if (options.delay && !isStopped()) {\n            // Check if we're overdue on any events being fired (super low delay or expensive callback)\n            const overdueCalls = Math.max(0, Math.floor((now - nextFireTime) / options.delay));\n            // If we're overdue, this means we're not firing callbacks fast enough and need to prevent\n            // exceeding the maximum update depth.\n            // To do this, we only fire the callback on an even number of overdues (including 0, no overdues).\n            // Else, we wait a little, then try again.\n            if (overdueCalls % 2 !== 1) {\n                // If the timer is up...\n                if (now >= nextFireTime) {\n                    // Call the callback\n                    if (typeof options.callback === 'function') {\n                        try {\n                            options.callback();\n                        } catch (e) {\n                            console.error(e);\n                        }\n                    }\n                    // Calculate and set the next time the timer should fire\n                    const overdueElapsedTime = overdueCalls * options.delay;\n                    const newFireTime = Math.max(now, nextFireTime + options.delay + overdueElapsedTime);\n                    setNextFireTime(newFireTime);\n                    // Set a timeout to check and fire the timer when time's up\n                    timeout = setTimeout(() => {\n                        // This merely triggers a rerender to check if the timer can fire.\n                        setCheckTime(new Date().getTime());\n                    }, Math.max(newFireTime - new Date().getTime(), 1));\n                }\n                // Time is not up yet. Set a timeout to check and fire when time's up\n                else if (nextFireTime < never) {\n                    timeout = setTimeout(() => {\n                    // This merely triggers a rerender to check if the timer can fire.\n                    setCheckTime(new Date().getTime());\n                    // Home in on the exact time to fire.\n                    }, Math.max(nextFireTime - new Date().getTime(), 1));\n                }\n            } else {\n                // Relief valve to avoid maximum update depth exceeded errors.\n                // When calls become overdue, there's too expensive of a callback or too low of a delay to keep up.\n                // In both cases, the React max update stack will be exceeded due to repeated firings.\n                // To relieve this, don't check to fire this time around, but check again in a short time.\n                timeout = setTimeout(() => {\n                    setCheckTime(new Date().getTime());\n                }, 20);\n            }\n        }\n\n        return () => {\n            clearTimeout(timeout);\n        };\n\n    }, [now, nextFireTime, isStopped, options.delay, options]);\n\n    return {\n        start,\n        stop,\n    }\n\n}\n\nfunction secondsToStr (seconds1: number) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n    var temp = seconds1;\n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' d';\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' h';\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' m';\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' s';\n    }\n    return '0'; //'just now' //or other string you like;\n}\n\nconst Reader = () => {\n\n    const [rawBookText, setRawBookText] = useState<string>('');\n    const [bookText, setBookText] = useState<string[]>([]);\n\n    const { id } = useParams<{ id: string; }>();\n    const { loaded, getBookContent } = useStorageContext();\n\n    const [title, setTitle] = useState('');\n\n    useEffect(() => {\n        if(!loaded) {\n            return;\n        }\n        getBookContent(id)\n            .then(({ info, content }) => {\n                setTitle(info.title);\n                setRawBookText(content);\n                setBookText(content.split(' '));\n            });\n    }, [loaded, id]);\n\n    const [speed, setSpeed] = useState(320);\n    const [isPlaying, setPlaying] = useState(false);\n    const [currentWordIndex, setCurrentWordIndex] = useState(0);\n\n    const { start, stop } = useAccurateTimer({ \n        delay: (60 / speed) * 1000,\n        callback: () => {\n            setCurrentWordIndex(v => v + 1);\n        }\n    });\n\n    const togglePlay = useCallback(() => setPlaying(v => {\n        let newValue = !v;\n        if(newValue) {\n            start();\n        } else {\n            stop();\n        }\n        return newValue;\n    }), [start, stop]);\n   \n    const speedUp = useCallback(() => setSpeed(curr => curr + 20), []);\n    const speedDown = useCallback(() => setSpeed(curr => curr - 20), []);\n    \n    const onPlayerClick = useCallback(() => {\n        togglePlay();\n    }, [togglePlay]);\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.header}>\n                <AngleLeft />\n                <div className={styles.title}>{title}</div>\n                <CogIcon />\n            </div>\n            {!isPlaying && \n                <div className={styles.textContainer}>\n                    <div className={styles.text}>{rawBookText}</div>\n                </div>\n            }\n            {isPlaying && \n                <div className={styles.textPlayer} onClick={onPlayerClick}>\n                    <SingleWordRender word={bookText[currentWordIndex]} />\n                </div>\n            }\n            <div className={styles.bottomMenu}>\n                <div>{secondsToStr(Math.floor((bookText.length - currentWordIndex) / (speed / 60)))}</div>\n                <div className={styles.controls}>\n                    <div className={styles.speedButtons}>\n                        <div className={styles.button} onClick={speedDown}><MinusIcon /></div>\n                        <div className={styles.button} onClick={togglePlay}>\n                            {isPlaying ? <PauseIcon /> : <PlayIcon/> } {speed}</div>\n                        <div className={styles.button} onClick={speedUp}><PlusIcon /></div>\n                    </div>\n                </div>\n                <div>{((currentWordIndex / bookText.length) * 100).toFixed(1)} %</div>\n            </div>\n        </div>\n    );\n}\n\nexport default Reader;","\nimport cn from 'classnames';\nimport { Link } from 'react-router-dom';\nimport styles from './styles.module.scss';\n\ninterface IBookProps {\n    id: string;\n    title: string;\n    author: string;\n    ttc?: string;\n    completed?: number;\n    cover?: string;\n}\n\nfunction Book({\n    id,\n    title,\n    author,\n    completed,\n    ttc,\n    cover\n}: IBookProps) {\n\n    return (\n        <Link to={`/book/${id}`} className={styles.container} >\n            <div className={cn(styles.book, { [styles.nocover]: !cover })} style={cover ? ({ background: `url(${cover})`, backgroundSize: 'cover' }) : {}}>\n                <div className={styles.bookWrapper}>\n                    {!cover && <div className={styles.title}>{title}</div>}\n                    {!cover && <div className={styles.author}>{author}</div>}\n                </div>\n            </div>\n            <div className={styles.bottom}>\n                <div>{completed}%</div>\n                <div>{ttc}</div>\n            </div>\n        </Link>\n    );\n}\n\nexport default Book;","\nimport JsZip from 'jszip';\nimport parser from 'fast-xml-parser';\n\nconst zip = new JsZip();\n\ninterface IMetadata {\n    id?: string;\n    publisher?: string;\n    language?: string;\n    title?: string;\n    subject?: string;\n    description?: string;\n    creator?: string;\n    date?: number;\n}\n\nclass EPub {\n\n    public cover: string | null = null;\n    public metadata: IMetadata = {};\n    public flow: string[] = [];\n    private items: {[key: string]: string}[] = [];\n    public compiled: string = \"\";\n\n    private containerFile: JsZip.JSZipObject | null = null;\n    private mimeFile: JsZip.JSZipObject | null = null;\n    private rootFile: JsZip.JSZipObject | null = null;\n\n    private file!: JsZip;\n    constructor(private data: Blob) {\n        if(data.type !== 'application/epub+zip') {\n            console.log(new Error(\"Not an Epub file\"))\n            return;\n        }\n    }\n\n    public async parse() {\n        return await this.open();\n    }\n\n    private async open() {\n        this.file = await zip.loadAsync(this.data);\n        // console.log(this.file)\n        \n        if(Object.keys(this.file.files).length === 0) {\n            console.log(new Error(\"No files in archive\"))\n            return;\n        }\n\n        await this.validateMimeTipe();\n        await this.validateRootFiles();\n        await this.parseRootFile();\n\n        await this.compileText();\n\n        // this.file.filter((path, file) => file.name)\n\n        return this.file;\n\n    }\n\n    private findFile(filename: string) {\n        const result = this.file.filter((path, file) => file.name.toLowerCase() === filename.toLowerCase());\n        if(result.length === 0) {\n            return null;\n        }\n        return result[0];\n    }\n\n    private async validateMimeTipe() {\n\n        this.mimeFile = this.findFile(\"mimetype\");\n        if(!this.mimeFile) {\n            console.log(new Error(\"No mimetype file in archive\"))\n            return;\n        }\n\n        const text = await this.mimeFile.async('text');\n\n        if(text.toLowerCase().trim() !== 'application/epub+zip') {\n            console.log(new Error(\"Unsupported mime type\"))\n            return;\n        }\n\n    }\n\n    private async validateRootFiles() {\n\n        this.containerFile = this.findFile(\"meta-inf/container.xml\");\n        if(!this.containerFile) {\n            console.log(new Error(\"No container file in archive\"));\n            return;\n        }\n\n        const xmlData = await this.containerFile.async('text');\n        const parsedXML = parser.parse(xmlData, { ignoreAttributes : false });\n\n        if (!parsedXML.container.rootfiles || !parsedXML.container.rootfiles.rootfile) {\n            console.log(new Error(\"No rootfiles found\"));\n            return;\n        }\n\n        const rootFileInfo = parsedXML.container.rootfiles.rootfile;\n        let filename: string;\n\n        if(rootFileInfo['@_media-type'] !== \"application/oebps-package+xml\" ) {\n            console.log(new Error(\"Rootfile in unknown format\"));\n            return;\n        }\n\n        filename = rootFileInfo['@_full-path'];\n\n        if(!filename) {\n            console.log(new Error(\"Empty rootfile\"));\n            return;\n        }\n\n        \n        this.rootFile = this.findFile(filename);\n        if(!this.rootFile) {\n            console.log(new Error(\"Rootfile not found from archive\"));\n            return;\n        }\n\n    }\n\n    private async parseRootFile() {\n\n        if(!this.rootFile) {\n            return;\n        }\n\n        const text = await this.rootFile.async('text');\n        const XMLData = parser.parse(text, { ignoreAttributes: false, ignoreNameSpace : true, attributeNamePrefix: '' });\n\n        for(const [key, value] of Object.entries(XMLData.package)) {\n            if(key === 'metadata') {\n                this.parseMetadata(value);\n            } else if(key === 'manifest') {\n                await this.parseManifest(value);\n            } else if(key === 'spine') {\n                this.parseSpine(value);\n            } else if(key === 'guide') {\n               await this.parseGuide(value);\n            }\n        }\n\n    }\n\n    private parseMetadata(metadata: any) {\n\n        for(const item of metadata.identifier) {\n            this.metadata.id = item['#text'];\n            break;\n        }\n        \n        this.metadata.creator = metadata.creator;\n        this.metadata.title = metadata.title;\n        this.metadata.description = metadata.description;\n        this.metadata.date = metadata.date;\n        this.metadata.language = metadata.language;\n        this.metadata.publisher = metadata.publisher;\n        this.metadata.title = metadata.title;\n\n    }\n\n    private async parseManifest(manifest: any) {\n    \n        const path = this.rootFile?.name.split(\"/\");\n        path?.pop();\n\n        const items: any = {};\n\n        for(const item of manifest.item) {\n            if(item['media-type'] === 'application/xhtml+xml') {\n                const href = path?.concat([item.href]).join('/');\n\n                const file = this.findFile(href!);\n                const r = await file?.async('text');\n                const text = new DOMParser().parseFromString(r!, \"text/xml\").documentElement.textContent;\n                \n                items[item.id] = text?.trim();\n            }\n        }\n\n        this.items = items;\n\n    }\n\n    private parseSpine(spine: any) {\n        if (spine.itemref) {\n            for(const { idref } of spine.itemref) {\n                this.flow.push(idref);\n            }\n        }\n    }\n\n    private async parseGuide(guide: any) {\n\n        if(!guide.reference || guide.reference.type !== 'cover') {\n            return;\n        }\n\n        const path = this.rootFile?.name.split(\"/\");\n        path?.pop();\n        const path_str = path?.join('/');\n\n        const href = path?.concat([guide.reference.href]).join('/');\n\n        if(!href) {\n            return;\n        }\n        const file = this.findFile(href);\n\n        if(!file) {\n            return;\n        }\n\n        const data = await file.async('blob');\n\n        this.cover = URL.createObjectURL(data);\n\n        \n    }\n\n    private async compileText() {\n\n        const outputText = [];\n\n        for(const id of this.flow) {\n            outputText.push((this.items as any)[id]);\n        }\n\n        this.compiled = outputText.join(' ');\n\n    }\n \n}\n\nexport default EPub;","import { useCallback } from \"react\";\n\nfunction useFileInput(options: any, callback: (files: File[]) => void) {\n\n    const onAction = useCallback(() => {\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.onchange = (event) => {\n            if(!event.target || (event.target as any).files.length === 0) {\n                return callback([]);\n            }\n            callback((event.target as any).files);\n        }\n        input.click();\n    }, [callback]);\n    \n    return onAction;\n\n}\n\nexport default useFileInput;","\n\nimport Book from '../../Components/Book';\nimport styles from './styles.module.scss';\nimport EPub from '../../Libraries/epub';\n\nimport { useStorageContext } from '../../Providers/Storage';\nimport useFileInput from '../../hooks/useFileInput';\n\nconst Library = () => {\n\n    const { library, addBook } = useStorageContext();\n    \n    const onAdd = useFileInput({}, (files: File[]) => {\n    \n        if(files.length === 0) {\n            return;\n        }\n\n        const selectedFile = files[0];    \n        const epub = new EPub(selectedFile);\n        epub.parse().then((res) => {\n\n            if(!epub.metadata.id) {\n                return;\n            }\n\n            addBook({\n                id: epub.metadata.id,\n                title: epub.metadata.title,\n                author: epub.metadata.creator,\n                cover: epub.cover || undefined,\n                content: epub.compiled,\n            })\n\n        });\n    })\n\n    return (\n        <div className={styles.container}>\n            <div className={styles.header}>\n                <div className={styles.title}>\n                    Library\n                </div>\n                <div className={styles.add} onClick={onAdd}>+</div>\n            </div>\n            <div className={styles.listContainer}>\n                <div className={styles.list}>\n                    {library.map(bookInfo => <Book key={bookInfo.id} {...bookInfo} /> )}\n                </div>\n            </div>\n            <div className={styles.bottomMenu}>\n               <div>\n                   Library\n               </div>\n               <div>\n                   Settings\n               </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Library;","\nimport { Switch, Route } from 'react-router-dom';\nimport Providers from './Providers';\n\nimport Reader from './Pages/Reader';\nimport Library from './Pages/Library';\n\nimport './App.css';\n\nfunction App() {\n  return (\n    <Providers>\n      <Switch>\n        <Route path=\"/book/:id\" component={Reader} />\n        <Route path=\"/\" component={Library} />\n      </Switch>\n    </Providers>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2yWX5\",\"header\":\"styles_header__3WudI\",\"title\":\"styles_title__1ADpo\",\"textContainer\":\"styles_textContainer__cVkSs\",\"textPlayer\":\"styles_textPlayer__3Nr3A\",\"bottomMenu\":\"styles_bottomMenu__1zn0F\",\"controls\":\"styles_controls__w_uLP\",\"speedButtons\":\"styles_speedButtons__1IaYj\",\"button\":\"styles_button__3bARj\"};"],"sourceRoot":""}