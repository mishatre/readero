{"version":3,"sources":["Components/ReaderHeader/styles.module.scss","Components/Book/styles.module.scss","Components/ReaderControls/styles.module.scss","Components/ReaderStatusBar/styles.module.scss","Components/Menu/styles.module.scss","Components/BookRender/styles.module.scss","Components/RSVPReader/styles.module.scss","Components/BookReader/styles.module.scss","Pages/Library/Header/styles.module.scss","Pages/Settings/Header/styles.module.scss","Pages/Library/styles.module.scss","Pages/Reader/styles.module.scss","Pages/Settings/styles.module.scss","styles.module.scss","utils/context.ts","Providers/Settings/index.tsx","Libraries/SentenceTokenizer.ts","Libraries/epubToTxt.ts","Providers/Library/index.tsx","Providers/ReadingStats/index.tsx","features/settings/settingsSlice.ts","store/index.ts","Providers/index.tsx","hooks/useBackgroundColor.ts","hooks/useElementSize.ts","assets/icons/play-solid.svg","Components/BookRender/index.tsx","assets/icons/pause-solid.svg","assets/icons/minus-solid.svg","assets/icons/plus-solid.svg","assets/icons/angle-left-solid.svg","Components/ReaderControls/index.tsx","utils/clamp.ts","utils/time.ts","Components/ReaderStatusBar/index.tsx","assets/icons/font-icon.svg","assets/icons/text-icon.svg","assets/icons/guideline-icon.svg","Components/ReaderHeader/index.tsx","hooks/useAccurateTimer.ts","Components/RSVPReader/index.tsx","hooks/useFontWidth.ts","Components/BookReader/index.tsx","Pages/Reader/index.tsx","Components/Book/index.tsx","hooks/useFileInput.ts","Pages/Library/Header/index.tsx","Pages/Library/index.tsx","Pages/Settings/Header/index.tsx","Pages/Settings/index.tsx","Components/Menu/index.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["module","exports","createCtx","ctx","createContext","undefined","c","useContext","Error","Provider","settingsList","defaultSettings","fontFamily","fontSize","wordsPerMinute","ORP","ORPGuideLine","slowDownOnLongWords","useSettings","SettingsProvider","children","useState","settings","setSettings","useEffect","key","jsonValue","localStorage","getItem","JSON","parse","value","set","useCallback","prevValue","nextValue","setItem","stringify","SentenceTokenizer","trim","array","length","pop","shift","tokenize","text","tokens","map","Function","prototype","call","String","this","findFile","archive","filename","files","result","filter","_","file","name","toLowerCase","validateMimeType","a","mimeFile","async","validateRootFile","containerFile","xmlData","parsedXML","parser","ignoreAttributes","container","rootfiles","rootfile","rootFileInfo","rootFile","parseRootFile","XMLData","attributeNamePrefix","attrNodeName","textNodeName","ignoreNameSpace","parseAttributeValue","metadata","parseMetadata","spine","parseSpine","manifest","parseManifest","guide","parseGuide","processingItems","processItems","loadItems","items","foundCover","findCover","loadCover","cover","uidName","package","attr","Object","entries","entry","parsedValue","Array","isArray","find","item","id","replace","toUpperCase","direction","toc","itemref","push","idref","reference","type","includes","split","path","filePath","href","join","blob","mime","lookup","slice","size","loadingItems","domParser","DOMParser","Promise","all","loadedItems","parsedItems","parseFromString","body","textContent","trimStart","trimEnd","replaceAll","reduce","acc","v","zip","JsZip","loadAsync","keys","parsedEpub","epubToTxt","useLibraryContext","LibraryProvider","isLoading","setIsLoading","library","setLibrary","localforage","data","coverBlob","URL","createObjectURL","loadBooks","from","parsedBooks","loadedBooks","book","totalWords","bookInfo","identifier","title","creator","totalSentences","info","coverUrl","console","log","newLibrary","deleteBook","getBook","useReadingStatsContext","ReadingStatsProvider","getStats","stringStats","index","setStats","currentStats","settingsSlice","createSlice","initialState","fontSizeRSVP","fontSizeReader","fontWidthRSVP","fontWidthReader","reducers","setFontFamily","state","action","payload","setFontSizeRSVP","setFontSizeReader","actions","store","configureStore","reducer","settingsReducer","Providers","loaded","setLoaded","document","fonts","load","then","basename","ReadingStats","useBackgroundColor","color","documentElement","style","backgroundColor","useElementSize","_path","elementRef","width","height","setSize","updateSize","node","current","offsetWidth","offsetHeight","ResizeObserver","observe","box","BookRender","mode","rows","currentIndex","onCurrentIndexChange","fontInfo","ref","useRef","listRef","rowIndex","i","scrollToItem","onRowClick","wordIndex","className","styles","itemSize","itemCount","list","overscanCount","colIndex","row","words","onClick","cn","selected","_excluded","_extends","assign","target","arguments","source","hasOwnProperty","apply","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgPlaySolid","_ref","svgRef","titleId","props","focusable","role","xmlns","viewBox","fill","d","_path2","ForwardRef","SvgPauseSolid","SvgMinusSolid","SvgPlusSolid","ReaderControls","hidden","onPlayPause","onSpeedUp","onSpeedDown","e","stopPropagation","buttons","button","bottom","memo","clamp","min","max","Math","timestampToHumanTime","timestamp","temp","floor","string","days","hours","minutes","seconds","ReaderStatusBar","currentWord","timeToRead","position","wordsLeft","playing","statusBar","bottomBar","timeLeft","SvgAngleLeftSolid","SvgFontIcon","SvgTextIcon","_rect","_rect2","_rect3","_rect4","SvgGuidelineIcon","rx","x","transform","ReaderHeader","onBackButton","onChangeFont","onSetORP","onSetORPGuidelines","backButton","never","Number","MAX_SAFE_INTEGER","useAccurateTimer","isPlaying","delay","callback","now","Date","getTime","setCheckTime","nextFireTime","setNextFireTime","currentTime","newNextFireTime","timeout","overdueCalls","userDelay","error","overdueElapsedTime","newFireTime","setTimeout","clearTimeout","getOrpPos","ceil","CharMeasurer","templateChars","chars","Map","globalThis","OffscreenCanvas","getContext","createElement","font","measureChars","char","measureText","measure","maxWidth","forEach","charWidth","get","RSVPReader","initialIndex","onNextWord","hasNextWord","wordCount","initial","prevMode","usePrevious","onTick","currState","newState","nextWord","word","measureRef","maxOffset","maxWords","orpMiddlePointPx","longestWidth","orpPos","r","substr","trimmedWord","orp","lpad","padStart","useORPWord","ORPGuideline","disabled","lineHeight","canvasCtx","measureFont","textBaseline","textMetrics","abs","actualBoundingBoxLeft","actualBoundingBoxRight","useFontWidth","fontWidth","setFontWidth","useWrappedText","setRows","bufferRow","wrappedWord","wrapText","BookReader","onBack","uiHidden","setUiHidden","setMode","stats","setStatsState","useReadingStats","timerRef","togglePlay","prev","onReaderClick","fontWeight","content","reader","Reader","bookData","setBook","useBook","useParams","history","useHistory","goBack","Book","wrapperRef","to","nocover","bookWrapper","y","author","completed","useFileInput","options","input","multiple","onchange","event","click","Header","onBookAdd","leftButton","rightButton","Library","onAdd","onBookClick","listContainer","Settings","Menu","location","useLocation","pathname","App","exact","component","isLocalhost","Boolean","window","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","process","origin","addEventListener","fetch","headers","response","contentType","status","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.aeb3c4d6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__lgzGZ\",\"hidden\":\"styles_hidden__3R_Vv\",\"hide\":\"styles_hide__2eb_z\",\"title\":\"styles_title__DVSKR\",\"button\":\"styles_button__tIKOm\",\"backButton\":\"styles_backButton__2Iift\",\"buttons\":\"styles_buttons__9MwoY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3L1DU\",\"book\":\"styles_book__3kr_u\",\"cover\":\"styles_cover__6Uu98\",\"nocover\":\"styles_nocover__2Rzyk\",\"bookWrapper\":\"styles_bookWrapper__385Le\",\"title\":\"styles_title__2fozK\",\"author\":\"styles_author__1rUEC\",\"bottom\":\"styles_bottom__3ye7t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__xRGQ3\",\"hidden\":\"styles_hidden__tkCK0\",\"hide\":\"styles_hide__1SJDM\",\"buttons\":\"styles_buttons__ooHsn\",\"button\":\"styles_button__1pqxT\",\"bottom\":\"styles_bottom__1djMp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1OVl5\",\"hidden\":\"styles_hidden__2LoYr\",\"hide\":\"styles_hide__3l2xM\",\"playing\":\"styles_playing__nBe_T\",\"statusBar\":\"styles_statusBar__2j5Er\",\"bottomBar\":\"styles_bottomBar__AwkZb\",\"timeLeft\":\"styles_timeLeft__3TwoZ\",\"wordsLeft\":\"styles_wordsLeft__APFUt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3_mvM\",\"item\":\"styles_item__3yruJ\",\"selected\":\"styles_selected__3DBuv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1g-wD\",\"list\":\"styles_list__gpRA5\",\"row\":\"styles_row__1cmOy\",\"selected\":\"styles_selected__zOB1R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3-HjY\",\"ORPGuideline\":\"styles_ORPGuideline__3GB2g\",\"disabled\":\"styles_disabled__3FT6u\",\"orp\":\"styles_orp__1TDsQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__2KjvO\",\"content\":\"styles_content__rVeXI\",\"reader\":\"styles_reader__hEHPF\",\"playing\":\"styles_playing__MdtfO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__11T8G\",\"title\":\"styles_title__2Sn61\",\"leftButton\":\"styles_leftButton__l4X_F\",\"rightButton\":\"styles_rightButton__3DyWY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1WeyU\",\"title\":\"styles_title__SbZyV\",\"leftButton\":\"styles_leftButton__3wmXK\",\"rightButton\":\"styles_rightButton__2SF5P\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__HUCkD\",\"listContainer\":\"styles_listContainer__26jV9\",\"list\":\"styles_list__1Gvkp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__3TSyu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1MT9X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1YyHF\"};","\r\nimport { createContext, useContext } from \"react\";\r\n\r\nexport default function createCtx<A extends {} | null>() {\r\n    const ctx = createContext<A | undefined>(undefined);\r\n    function useCtx() {\r\n        const c = useContext(ctx);\r\n        if (c === undefined) {\r\n            throw new Error('useCtx must be inside a Provider with a value');\r\n        }\r\n        return c;\r\n    }\r\n    return [useCtx, ctx.Provider] as const;\r\n}","import createCtx from '../../utils/context';\r\nimport { useCallback, useEffect, useState } from 'react';\r\n\r\ntype SetStateAction<S> = S | ((prevState: S) => S);\r\n\r\ninterface ISettingsProviderProps {\r\n    children: React.ReactNode;\r\n}\r\n\r\ninterface ISettingsContext {\r\n    settings: ISettings;\r\n    set: <K extends keyof ISettings>(\r\n        key: K,\r\n        value: SetStateAction<ISettings[K]>\r\n    ) => void;\r\n}\r\n\r\nexport interface ISettings {\r\n    fontFamily: string;\r\n    fontSize: number;\r\n    wordsPerMinute: number;\r\n    ORP: boolean;\r\n    ORPGuideLine: boolean;\r\n    slowDownOnLongWords: boolean;\r\n}\r\n\r\nconst settingsList = [\r\n    'fontFamily',\r\n    'fontSize',\r\n    'wordsPerMinute',\r\n    'ORP',\r\n    'ORPGuideLine',\r\n    'slowDownOnLongWords',\r\n] as const;\r\n\r\n// const fontSettings = {\r\n//     fontFamily: 'Liberation Mono',\r\n//     fontSizeRSVP: 48,\r\n//     fontSizeReader: 16,\r\n//     linHeight: 'normal',\r\n// }\r\n\r\nconst defaultSettings = {\r\n    fontFamily: 'Liberation Mono',\r\n    fontSize: 48,\r\n    wordsPerMinute: 320,\r\n    ORP: true,\r\n    ORPGuideLine: true,\r\n    slowDownOnLongWords: true,\r\n};\r\n\r\nconst [useSettings, Provider] = createCtx<ISettingsContext>();\r\n\r\nconst SettingsProvider = ({ children }: ISettingsProviderProps) => {\r\n    const [settings, setSettings] = useState<ISettings | null>(null);\r\n\r\n    useEffect(() => {\r\n        const settings = defaultSettings;\r\n        for (const key of settingsList) {\r\n            const jsonValue = localStorage.getItem(key);\r\n            if (jsonValue) {\r\n                (settings[key] as ISettings[typeof key]) = JSON.parse(\r\n                    jsonValue\r\n                ).value;\r\n            }\r\n        }\r\n        setSettings(settings);\r\n    }, []);\r\n\r\n    const set = useCallback(\r\n        <K extends keyof ISettings>(\r\n            key: K,\r\n            value: SetStateAction<ISettings[K]>\r\n        ) => {\r\n            setSettings((prevValue) => {\r\n                if (!prevValue) {\r\n                    return null;\r\n                }\r\n                const nextValue =\r\n                    typeof value === 'function' ? value(prevValue[key]) : value;\r\n                localStorage.setItem(key, JSON.stringify({ value: nextValue }));\r\n                return { ...prevValue, [key]: nextValue };\r\n            });\r\n        },\r\n        []\r\n    );\r\n\r\n    if (!settings) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <Provider\r\n            value={{\r\n                settings,\r\n                set,\r\n            }}\r\n        >\r\n            {children}\r\n        </Provider>\r\n    );\r\n};\r\n\r\nexport { useSettings };\r\n\r\nexport default SettingsProvider;\r\n","\r\ninterface ISentenceTokenizer {\r\n  (): void;\r\n  trim: (array: string[]) => string[];\r\n  tokenize: (text: string) => string[];\r\n}\r\n\r\nconst SentenceTokenizer = function () {\r\n}\r\n\r\nSentenceTokenizer.trim = function (array: string[]) {\r\n    while (array[array.length - 1] === '') { array.pop() }\r\n    while (array[0] === '') { array.shift() }  \r\n    return array;\r\n}\r\n\r\nSentenceTokenizer.tokenize = function (text: string): string[] {\r\n    // break string up in to sentences based on punctation and quotation marks\r\n    // let tokens = text.match(/(?<=\\s+|^)[\"'‘“'\"[({⟨]?(.*?[.?!])(\\s[.?!])*[\"'’”'\"\\])}⟩]?(?=\\s+|$)|(?<=\\s+|^)\\S(.*?[.?!])(\\s[.?!])*(?=\\s+|$)/g);\r\n    let tokens = null;\r\n    if (!tokens) {\r\n      return [text]\r\n    }\r\n\r\n    // remove unecessary white space\r\n    tokens = (tokens as any).map(Function.prototype.call, String.prototype.trim);\r\n\r\n    return this.trim(tokens);\r\n}\r\n\r\nexport default SentenceTokenizer as ISentenceTokenizer;","import JsZip from 'jszip';\r\nimport parser from 'fast-xml-parser';\r\nimport mime from 'mime-types';\r\nimport SentenceTokenizer from './SentenceTokenizer';\r\n\r\ntype PickByValue<T, V> = Pick<\r\n    T,\r\n    { [K in keyof T]: T[K] extends V ? K : never }[keyof T]\r\n>;\r\ntype Entries<T> = {\r\n    [K in keyof T]: [keyof PickByValue<T, T[K]>, T[K]];\r\n}[keyof T][];\r\n\r\ntype TEpubXMLIdentifier = {\r\n    value: string;\r\n    attr: {\r\n        id: string;\r\n    };\r\n};\r\n\r\ninterface IEpubXMLMetadata {\r\n    identifier: TEpubXMLIdentifier | TEpubXMLIdentifier[];\r\n    title: string;\r\n    language: string;\r\n    creator?: string;\r\n\r\n    description?: string;\r\n    subject?: string;\r\n    publisher?: string;\r\n\r\n    date?: string | number;\r\n\r\n    meta: Array<{ attr: { name: string; content: string | number } }>;\r\n}\r\n\r\ninterface IEpubXMLManifest {\r\n    item: Array<{ attr: { href: string; 'media-type': string; id: string } }>;\r\n}\r\n\r\ninterface IEpubXMLSpineItemRef {\r\n    attr: {\r\n        id?: string;\r\n        idref: string;\r\n        linear?: 'yes' | 'no';\r\n    };\r\n}\r\n\r\ninterface IEpubXMLSpine {\r\n    attr: {\r\n        id?: string;\r\n        'page-progression-direction'?: 'rtl' | 'ltr';\r\n        toc?: string;\r\n    };\r\n    itemref: IEpubXMLSpineItemRef | IEpubXMLSpineItemRef[];\r\n}\r\n\r\ninterface IXMLData {\r\n    package: {\r\n        attr: {\r\n            version: number;\r\n            'unique-identifier': string;\r\n        };\r\n        metadata: IEpubXMLMetadata;\r\n        manifest: IEpubXMLManifest;\r\n        spine: IEpubXMLSpine;\r\n        guide?:\r\n            | string\r\n            | {\r\n                  reference: {\r\n                      attr: {\r\n                          href: string;\r\n                          type: string;\r\n                          title: string;\r\n                      };\r\n                  };\r\n              };\r\n    };\r\n}\r\n\r\ninterface IEpubMetadata {\r\n    identifier: string;\r\n    publisher?: string;\r\n    language?: string;\r\n    title?: string;\r\n    subject?: string;\r\n    description?: string;\r\n    creator?: string;\r\n    date?: string;\r\n}\r\n\r\ninterface IEpubSpine {\r\n    id?: string;\r\n    direction?: 'rtl' | 'ltr';\r\n    toc?: string;\r\n    items: Array<string>;\r\n}\r\n\r\ntype TEpubManifest = {\r\n    href: string;\r\n    'media-type': string;\r\n    id: string;\r\n}[];\r\n\r\ntype TEpubGuide = {\r\n    href: string;\r\n    type: string;\r\n    title: string;\r\n};\r\n\r\nfunction findFile(archive: JsZip, filename: string) {\r\n    if (archive.files[filename]) {\r\n        return archive.files[filename];\r\n    }\r\n    const result = archive.filter(\r\n        (_, file) => file.name.toLowerCase() === filename.toLowerCase()\r\n    );\r\n    if (result.length > 0) {\r\n        return result[0];\r\n    }\r\n    return null;\r\n}\r\n\r\nasync function validateMimeType(archive: JsZip) {\r\n    const mimeFile = findFile(archive, 'mimetype');\r\n    if (!mimeFile) {\r\n        throw new Error('No mimetype file in archive');\r\n    }\r\n\r\n    const epubMimeType = await mimeFile.async('text');\r\n\r\n    if (epubMimeType.toLowerCase().trim() !== 'application/epub+zip') {\r\n        throw new Error('Unsupported mime type');\r\n    }\r\n}\r\n\r\nasync function validateRootFile(archive: JsZip) {\r\n    const containerFile = findFile(archive, 'meta-inf/container.xml');\r\n    if (!containerFile) {\r\n        throw new Error('No container file in archive');\r\n    }\r\n\r\n    const xmlData = await containerFile.async('text');\r\n    const parsedXML = parser.parse(xmlData, { ignoreAttributes: false });\r\n\r\n    if (\r\n        !parsedXML.container.rootfiles ||\r\n        !parsedXML.container.rootfiles.rootfile\r\n    ) {\r\n        throw new Error('No rootfiles found');\r\n    }\r\n\r\n    const rootFileInfo = parsedXML.container.rootfiles.rootfile;\r\n    let filename: string;\r\n\r\n    if (rootFileInfo['@_media-type'] !== 'application/oebps-package+xml') {\r\n        throw new Error('Rootfile in unknown format');\r\n    }\r\n\r\n    filename = rootFileInfo['@_full-path'];\r\n\r\n    if (!filename) {\r\n        throw new Error('Empty rootfile');\r\n    }\r\n\r\n    const rootFile = findFile(archive, filename);\r\n    if (!rootFile) {\r\n        throw new Error('Rootfile not found from archive');\r\n    }\r\n\r\n    return rootFile;\r\n}\r\n\r\nasync function parseRootFile(archive: JsZip, rootFile: JsZip.JSZipObject) {\r\n    const text = await rootFile.async('text');\r\n    const XMLData = parser.parse(text, {\r\n        attributeNamePrefix: '',\r\n        attrNodeName: 'attr',\r\n        textNodeName: 'value',\r\n        ignoreAttributes: false,\r\n        ignoreNameSpace: true,\r\n        parseAttributeValue: true,\r\n    }) as IXMLData;\r\n\r\n    const metadata = parseMetadata(XMLData);\r\n    const spine = parseSpine(XMLData);\r\n    const manifest = parseManifest(XMLData);\r\n    const guide = parseGuide(XMLData);\r\n\r\n    const processingItems = processItems(manifest, spine);\r\n    const items = await loadItems(archive, rootFile, processingItems);\r\n\r\n    const foundCover = findCover(manifest, guide);\r\n    const cover = await loadCover(archive, rootFile, foundCover);\r\n\r\n    return {\r\n        cover,\r\n        metadata,\r\n        items,\r\n    };\r\n}\r\n\r\nfunction parseMetadata(XMLData: IXMLData) {\r\n    const metadata: Partial<IEpubMetadata> = {};\r\n\r\n    const uidName = XMLData.package.attr['unique-identifier'];\r\n    const entries = Object.entries(\r\n        XMLData.package.metadata\r\n    ) as Entries<IEpubXMLMetadata>;\r\n    for (const entry of entries) {\r\n        if (entry) {\r\n            const [key, value] = entry;\r\n\r\n            if (value) {\r\n                let parsedValue = null;\r\n                if (key === 'identifier') {\r\n                    parsedValue = value;\r\n                    if (Array.isArray(value)) {\r\n                        parsedValue = (value as TEpubXMLIdentifier[]).find(\r\n                            (item) => item.attr.id === uidName\r\n                        );\r\n                        if (parsedValue) {\r\n                            parsedValue = parsedValue.value;\r\n                        }\r\n                    } else {\r\n                        parsedValue = (value as TEpubXMLIdentifier).value;\r\n                    }\r\n                    if (parsedValue) {\r\n                        parsedValue = String(parsedValue)\r\n                            .replace('urn:uuid:', '')\r\n                            .toUpperCase()\r\n                            .trim();\r\n                    } else {\r\n                        throw new Error(\r\n                            'Cannot determine book unique identifier'\r\n                        );\r\n                    }\r\n                } else {\r\n                    if (typeof value === 'object') {\r\n                        // TODO: Do better typings\r\n                        parsedValue = (value as any).value;\r\n                    } else {\r\n                        parsedValue = value;\r\n                    }\r\n                }\r\n                metadata[key as keyof IEpubMetadata] = parsedValue;\r\n            }\r\n        }\r\n    }\r\n\r\n    return metadata as IEpubMetadata;\r\n}\r\n\r\nfunction parseSpine(XMLData: IXMLData) {\r\n    const spine: Partial<IEpubSpine> = {\r\n        items: [],\r\n    };\r\n    if ('id' in XMLData.package.spine.attr) {\r\n        spine.id = XMLData.package.spine.attr.id;\r\n    }\r\n    if ('page-progression-direction' in XMLData.package.spine.attr) {\r\n        spine.direction =\r\n            XMLData.package.spine.attr['page-progression-direction'];\r\n    }\r\n    if ('toc' in XMLData.package.spine.attr) {\r\n        spine.toc = XMLData.package.spine.attr.toc;\r\n    }\r\n\r\n    if (Array.isArray(XMLData.package.spine.itemref)) {\r\n        for (const item of XMLData.package.spine.itemref) {\r\n            spine.items?.push(item.attr.idref);\r\n        }\r\n    } else {\r\n        spine.items?.push(XMLData.package.spine.itemref.attr.idref);\r\n    }\r\n\r\n    return spine as IEpubSpine;\r\n}\r\n\r\nfunction parseManifest(XMLData: IXMLData) {\r\n    const manifest: TEpubManifest = [];\r\n    for (const item of XMLData.package.manifest.item) {\r\n        manifest.push(item.attr);\r\n    }\r\n    return manifest;\r\n}\r\n\r\nfunction parseGuide(XMLData: IXMLData) {\r\n    if (!XMLData.package.guide || typeof XMLData.package.guide === 'string') {\r\n        return undefined;\r\n    }\r\n    // There is books where guide is array;\r\n    return XMLData.package.guide.reference.attr;\r\n}\r\n\r\n//\r\n\r\nfunction findCover(manifest: TEpubManifest, guide?: TEpubGuide) {\r\n    if (guide && guide.type === 'cover') {\r\n        return guide;\r\n    }\r\n    for (const item of manifest) {\r\n        if (item.id.includes('cover.jpg')) {\r\n            return item;\r\n        }\r\n    }\r\n}\r\nfunction processItems(manifest: TEpubManifest, spine: IEpubSpine) {\r\n    const items = [];\r\n    for (const id of spine.items) {\r\n        const item = manifest.find((item) => item.id === id);\r\n        if (item && item['media-type'] === 'application/xhtml+xml') {\r\n            items.push(item);\r\n        }\r\n    }\r\n    return items;\r\n}\r\n\r\n//\r\n\r\nasync function loadCover(\r\n    archive: JsZip,\r\n    rootFile: JsZip.JSZipObject,\r\n    cover?: { href: string; 'media-type'?: string }\r\n) {\r\n    if (!cover) {\r\n        return null;\r\n    }\r\n\r\n    const [path] = rootFile?.name.split('/');\r\n    const filePath = [path, cover.href].join('/');\r\n    const blob = await archive.files[filePath].async('blob');\r\n\r\n    const type = cover['media-type'] || mime.lookup(cover.href);\r\n\r\n    if (!type) {\r\n        return blob;\r\n    }\r\n\r\n    return blob.slice(0, blob.size, type);\r\n}\r\n\r\nasync function loadItems(\r\n    archive: JsZip,\r\n    rootFile: JsZip.JSZipObject,\r\n    processingItems: Array<{ href: string }>\r\n) {\r\n    const [path] = rootFile?.name.split('/');\r\n\r\n    const loadingItems = [];\r\n    for (const { href } of processingItems) {\r\n        const filePath = [path, href].join('/');\r\n        loadingItems.push(archive.files[filePath].async('text'));\r\n    }\r\n    const domParser = new DOMParser();\r\n    const loadedItems = await Promise.all(loadingItems);\r\n    const parsedItems = loadedItems\r\n        .map((item) =>\r\n            SentenceTokenizer.tokenize(\r\n                (\r\n                    domParser\r\n                        .parseFromString(item, 'application/xhtml+xml')\r\n                        .body.textContent?.trimStart()\r\n                        ?.trimEnd() + '.'\r\n                )\r\n                    .split('\\n')\r\n                    .join('. ')\r\n            )\r\n                .map((item) => item.replaceAll('. .', '.'))\r\n                .filter((item) => item !== '.')\r\n        )\r\n        .reduce((acc, v) => [...acc, ...v], []);\r\n    return parsedItems;\r\n}\r\n\r\nasync function epubToTxt(blob: Blob) {\r\n    if (blob.type !== 'application/epub+zip') {\r\n        throw new Error('Not an Epub file');\r\n    }\r\n\r\n    const zip = new JsZip();\r\n    const archive = await zip.loadAsync(blob);\r\n\r\n    if (Object.keys(archive.files).length === 0) {\r\n        throw new Error('No files in archive');\r\n    }\r\n\r\n    await validateMimeType(archive);\r\n    const rootFile = await validateRootFile(archive);\r\n    const parsedEpub = await parseRootFile(archive, rootFile);\r\n\r\n    return parsedEpub;\r\n}\r\n\r\nexport default epubToTxt;\r\n","import createCtx from 'utils/context';\r\nimport localforage from 'localforage';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport epubToTxt from 'Libraries/epubToTxt';\r\n\r\ninterface ILibraryProviderProps {\r\n    children: React.ReactNode;\r\n}\r\n\r\nexport interface IBookInfo {\r\n    id: string;\r\n    title: string;\r\n    creator?: string;\r\n    cover: string | boolean;\r\n\r\n    totalWords: number;\r\n    totalSentences: number;\r\n}\r\n\r\ninterface ILibraryContext {\r\n    library: IBookInfo[];\r\n\r\n    loadBooks: (files: Blob[]) => void;\r\n    deleteBook: (id: string) => void;\r\n\r\n    getBook: (id: string) => Promise<{\r\n        info: IBookInfo;\r\n        items: string[];\r\n    }>;\r\n}\r\n\r\nconst [useLibraryContext, Provider] = createCtx<ILibraryContext>();\r\n\r\nconst LibraryProvider = ({ children }: ILibraryProviderProps) => {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [library, setLibrary] = useState<IBookInfo[]>([]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            const data = await localforage.getItem<IBookInfo[]>('library');\r\n            setLibrary((data as any) || []);\r\n\r\n            for (let item of (data || []) as any) {\r\n                const coverBlob = await localforage.getItem(`${item.id}_cover`);\r\n                if (coverBlob) {\r\n                    (item as any).cover = URL.createObjectURL(coverBlob);\r\n                }\r\n            }\r\n            setIsLoading(false);\r\n        })();\r\n    }, []);\r\n\r\n    // const bookExists = useCallback(\r\n    //     (id: string) => {\r\n    //         if (!library) {\r\n    //             return false;\r\n    //         }\r\n    //         return !!library.find((item) => item.id === id);\r\n    //     },\r\n    //     [library]\r\n    // );\r\n\r\n    //\r\n    const loadBooks = useCallback(\r\n        async (files: Blob[]) => {\r\n            const parsedBooks = await Promise.all(\r\n                Array.from(files).map((file) => epubToTxt(file))\r\n            );\r\n\r\n            const loadedBooks = parsedBooks.map((book) => {\r\n                const totalWords = book.items.reduce(\r\n                    (acc, item) => acc + item.split(' ').length,\r\n                    0\r\n                );\r\n\r\n                const bookInfo = {\r\n                    id: book.metadata.identifier,\r\n                    title: book.metadata.title || '',\r\n                    creator: book.metadata.creator || '',\r\n                    cover: !!book.cover,\r\n\r\n                    totalWords,\r\n                    totalSentences: book.items.length,\r\n                };\r\n\r\n                return {\r\n                    id: bookInfo.id,\r\n                    info: bookInfo,\r\n                    items: book.items,\r\n                    cover: book.cover,\r\n                    coverUrl: book.cover\r\n                        ? URL.createObjectURL(book.cover)\r\n                        : false,\r\n                };\r\n            });\r\n\r\n            await Promise.all(\r\n                loadedBooks.map(({ id, items }) =>\r\n                    localforage.setItem(id, items)\r\n                )\r\n            );\r\n\r\n            console.log(loadedBooks);\r\n\r\n            const newLibrary = [\r\n                ...library,\r\n                ...loadedBooks.map(({ info }) => info),\r\n            ];\r\n            await localforage.setItem('library', newLibrary);\r\n\r\n            await Promise.all(\r\n                loadedBooks\r\n                    .filter(({ cover }) => !!cover)\r\n                    .map(({ id, cover }) =>\r\n                        localforage.setItem(`${id}_cover`, cover)\r\n                    )\r\n            );\r\n\r\n            setLibrary([\r\n                ...library,\r\n                ...loadedBooks.map(({ info, coverUrl }) => ({\r\n                    ...info,\r\n                    cover: coverUrl,\r\n                })),\r\n            ]);\r\n        },\r\n        [library]\r\n    );\r\n\r\n    const deleteBook = useCallback((id: string) => {}, []);\r\n\r\n    const getBook = useCallback(\r\n        async (id: string) => {\r\n            const items = (await localforage.getItem<string[]>(id)) || [];\r\n            const info = library!.find((item) => item.id === id)!;\r\n            return {\r\n                info,\r\n                items,\r\n            };\r\n        },\r\n        [library]\r\n    );\r\n\r\n    if (isLoading) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <Provider\r\n            value={{\r\n                library,\r\n\r\n                loadBooks,\r\n                deleteBook,\r\n\r\n                getBook,\r\n            }}\r\n        >\r\n            {children}\r\n        </Provider>\r\n    );\r\n};\r\n\r\nexport { useLibraryContext };\r\n\r\nexport default LibraryProvider;\r\n","import createCtx from '../../utils/context';\r\nimport { useCallback, useEffect, useState } from 'react';\r\n\r\ninterface IReadingStatsProviderProps {\r\n    children: React.ReactNode;\r\n}\r\n\r\ninterface IReadingStatsContext {\r\n    getStats: (id: string) => IBookStat;\r\n    setStats: <K extends keyof IBookStat>(\r\n        id: string,\r\n        key: K,\r\n        value: IBookStat[K]\r\n    ) => IBookStat;\r\n}\r\n\r\nexport interface IBookStat {\r\n    index: number;\r\n}\r\n\r\nconst [useReadingStatsContext, Provider] = createCtx<IReadingStatsContext>();\r\n\r\nconst ReadingStatsProvider = ({ children }: IReadingStatsProviderProps) => {\r\n    const getStats = useCallback((id: string) => {\r\n        const stringStats = localStorage.getItem(id);\r\n        if (stringStats) {\r\n            return JSON.parse(stringStats);\r\n        }\r\n        return {\r\n            index: 0,\r\n        };\r\n    }, []);\r\n    const setStats = useCallback(\r\n        <K extends keyof IBookStat>(\r\n            id: string,\r\n            key: K,\r\n            value: IBookStat[K]\r\n        ) => {\r\n            let currentStats = {\r\n                index: 0,\r\n            };\r\n\r\n            const stringStats = localStorage.getItem(id);\r\n            if (stringStats) {\r\n                currentStats = JSON.parse(stringStats);\r\n            }\r\n            currentStats[key] = value;\r\n            localStorage.setItem(id, JSON.stringify(currentStats));\r\n\r\n            return currentStats;\r\n        },\r\n        []\r\n    );\r\n\r\n    return (\r\n        <Provider\r\n            value={{\r\n                getStats,\r\n                setStats,\r\n            }}\r\n        >\r\n            {children}\r\n        </Provider>\r\n    );\r\n};\r\n\r\nfunction useReadingStats(id: string) {\r\n    const { getStats, setStats: set } = useReadingStatsContext();\r\n    const [stats, setStatsState] = useState<IBookStat>(getStats(id));\r\n    const setStats = useCallback(\r\n        <K extends keyof IBookStat>(\r\n            id: string,\r\n            key: K,\r\n            value: IBookStat[K]\r\n        ) => {\r\n            setStatsState(set(id, key, value));\r\n        },\r\n        [set]\r\n    );\r\n    useEffect(() => {\r\n        setStatsState(getStats(id));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [id]);\r\n    return { stats, setStats };\r\n}\r\n\r\nexport { useReadingStatsContext, useReadingStats };\r\n\r\nexport default ReadingStatsProvider;\r\n","\r\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\r\nimport type { RootState } from 'store';\r\n\r\ninterface SettingsState {\r\n    fontFamily: string;\r\n    fontSizeRSVP: number;\r\n    fontSizeReader: number;\r\n    fontWidthRSVP: number;\r\n    fontWidthReader: number;\r\n}\r\n\r\nconst initialState: SettingsState = {\r\n    fontFamily: '',\r\n    fontSizeRSVP: 42,\r\n    fontSizeReader: 16,\r\n    fontWidthRSVP: 0, \r\n    fontWidthReader: 0,\r\n};\r\n\r\nconst settingsSlice = createSlice({\r\n    name: 'settings',\r\n    initialState,\r\n    reducers: {\r\n        setFontFamily: (state, action: PayloadAction<string>) => {\r\n            state.fontFamily = action.payload;\r\n            // Calculate font width;\r\n        },\r\n        setFontSizeRSVP: (state, action: PayloadAction<number>) => {\r\n            state.fontSizeRSVP = action.payload;\r\n            // Calculate font width;\r\n        },\r\n        setFontSizeReader: (state, action: PayloadAction<number>) => {\r\n            state.fontSizeReader = action.payload;\r\n            // Calculate font width;\r\n        },\r\n\r\n    },\r\n})\r\n\r\nexport const {\r\n    setFontFamily,\r\n    setFontSizeRSVP,\r\n    setFontSizeReader,\r\n} = settingsSlice.actions;\r\n\r\n// Other code such as selectors can use the imported `RootState` type\r\nexport const selectSettings = (state: RootState, type: 'RSVP' | 'Reader') => {\r\n    if(type === 'RSVP') {\r\n        return {\r\n            fontFamily: state.settings.fontFamily,\r\n            fontSize: state.settings.fontSizeRSVP,\r\n            fontWidth: state.settings.fontWidthRSVP,\r\n        }\r\n    } else {\r\n        return {\r\n            fontFamily: state.settings.fontFamily,\r\n            fontSize: state.settings.fontSizeReader,\r\n            fontWidth: state.settings.fontWidthReader,\r\n        }\r\n    }\r\n};\r\n\r\nexport default settingsSlice.reducer;","\r\nimport { configureStore } from '@reduxjs/toolkit';\r\nimport settingsReducer from 'features/settings/settingsSlice';\r\n\r\nexport const store = configureStore({\r\n    reducer: {\r\n        settings: settingsReducer,\r\n    }\r\n})\r\n\r\n// Infer the `RootState` and `AppDispatch` types from the store itself\r\nexport type RootState = ReturnType<typeof store.getState>\r\n// Inferred type: {}\r\nexport type AppDispatch = typeof store.dispatch","import { BrowserRouter as Router } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport SettingsProvider from './Settings';\r\nimport StorageProvider from './Library';\r\nimport ReadingStatsProvider from './ReadingStats';\r\n\r\nimport { store } from 'store';\r\nimport { useState } from 'react';\r\nimport { useEffect } from 'react';\r\n\r\ninterface IProvidersProps {\r\n    children: React.ReactNode;\r\n}\r\n\r\nconst Providers = ({ children }: IProvidersProps) => {\r\n\r\n    const [loaded, setLoaded] = useState(false);\r\n    useEffect(() => {\r\n        Promise.all([\r\n            (document as any).fonts.load('16px Liberation Mono'),\r\n            (document as any).fonts.load('48px SFMono')\r\n        ]).then(() => {\r\n            setLoaded(true);\r\n        })\r\n    }, []);\r\n\r\n    return (\r\n        <Provider store={store}>\r\n            <Router basename=\"./readero\">\r\n                 <SettingsProvider>\r\n                     <ReadingStatsProvider>\r\n                         <StorageProvider>\r\n                             {loaded && children}\r\n                        </StorageProvider>\r\n                     </ReadingStatsProvider>\r\n                 </SettingsProvider>\r\n             </Router>\r\n        </Provider>\r\n    );\r\n};\r\n\r\nexport default Providers;\r\n","import { useEffect } from \"react\";\r\n\r\nfunction useBackgroundColor(color: string) {\r\n    useEffect(() => {\r\n        document.documentElement.style.backgroundColor = color;\r\n        document.body.style.backgroundColor = color;\r\n    }, [color]);\r\n}\r\n\r\nexport default useBackgroundColor;","import { RefObject, useCallback, useEffect, useState } from 'react';\r\n\r\n// See: https://usehooks-typescript.com/react-hook/use-event-listener\r\n// import useEventListener from './useEventListener';\r\n\r\ninterface Size {\r\n    width: number;\r\n    height: number;\r\n}\r\n\r\nfunction useElementSize<T extends HTMLElement = HTMLDivElement>(\r\n    elementRef: RefObject<T>\r\n): Size {\r\n    const [size, setSize] = useState<Size>({\r\n        width: 0,\r\n        height: 0,\r\n    });\r\n\r\n    // Prevent too many rendering using useCallback\r\n    const updateSize = useCallback(() => {\r\n        const node = elementRef?.current;\r\n        if (node) {\r\n            setSize({\r\n                width: node.offsetWidth || 0,\r\n                height: node.offsetHeight || 0,\r\n            });\r\n        }\r\n    }, [elementRef]);\r\n\r\n    // Initial size on mount\r\n    useEffect(() => {\r\n        const node = elementRef?.current;\r\n        if (node) {\r\n            const observer = new ResizeObserver(updateSize);\r\n            observer.observe(node, { box: 'content-box' })\r\n            updateSize();\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n    useEffect(() => { }, []);\r\n\r\n    // useEventListener('resize', updateSize);\r\n\r\n    return size;\r\n}\r\n\r\nexport default useElementSize;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPlaySolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    \"data-prefix\": \"fas\",\n    \"data-icon\": \"play\",\n    className: \"svg-inline--fa fa-play fa-w-14\",\n    role: \"img\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPlaySolid);\nexport default __webpack_public_path__ + \"static/media/play-solid.3c7578b0.svg\";\nexport { ForwardRef as ReactComponent };","import { useCallback, useEffect, useRef } from 'react';\r\nimport cn from 'classnames';\r\nimport { FixedSizeList as List } from 'react-window';\r\n\r\nimport useElementSize from 'hooks/useElementSize';\r\n\r\nimport { IFontInfo } from 'types/fontInfo';\r\n\r\nimport styles from './styles.module.scss';\r\n\r\ninterface IBookRenderProps {\r\n    mode: 'view' | 'play' | 'pause';\r\n    rows: Array<{ index: number; text: string; words: string[]; }>;\r\n    width: number;\r\n    currentIndex: number;\r\n    onCurrentIndexChange?: (index: number) => void;\r\n    fontInfo: IFontInfo,\r\n}\r\n\r\nconst BookRender = ({\r\n    mode,\r\n    rows,\r\n    width,\r\n    currentIndex,\r\n    onCurrentIndexChange,\r\n\r\n    fontInfo,\r\n}: IBookRenderProps) => {\r\n    const ref = useRef<HTMLDivElement>(null);\r\n    const listRef = useRef<List>(null);\r\n    const { height } = useElementSize(ref);\r\n\r\n    useEffect(() => {        \r\n        if (listRef.current) {\r\n            let rowIndex = -1;\r\n            for(let i = 0; i < rows.length; i++) {\r\n                if(currentIndex < rows[i].index) {\r\n                    rowIndex = i === 0 ? 0 : i - 1;\r\n                    break;\r\n                }\r\n            }\r\n            if(rowIndex !== -1) {\r\n                listRef.current.scrollToItem(rowIndex, 'smart');\r\n            }\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [mode === 'view', rows]);\r\n\r\n    const onRowClick = useCallback(\r\n        (rowIndex: number, wordIndex) => {            \r\n            onCurrentIndexChange?.(rows[rowIndex].index + wordIndex);\r\n        },\r\n        [onCurrentIndexChange, rows]\r\n    );\r\n\r\n    if (mode !== 'view') {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            ref={ref}\r\n            className={styles.container}\r\n            style={{\r\n                fontFamily: fontInfo.fontFamily,\r\n            }}\r\n        >\r\n            <List\r\n                ref={listRef}\r\n                height={height}\r\n                width={width}\r\n                itemSize={24}\r\n                itemCount={rows.length}\r\n                className={styles.list}\r\n                overscanCount={20}\r\n            >\r\n                {({ style, index }) => {\r\n\r\n                    let rowIndex = -1;\r\n                    let colIndex = -1;\r\n\r\n                    if(!rows[index+1] || currentIndex < rows[index+1].index) { \r\n                        rowIndex = index;\r\n                        colIndex = currentIndex - rows[index].index;\r\n                    }\r\n\r\n                    return (\r\n                        <div className={styles.row} style={style}>\r\n                            {rows[index].words.map((item, wordIndex) => (\r\n                                <span\r\n                                    key={(index + 1) * wordIndex}\r\n                                    onClick={() => onRowClick(index, wordIndex)}\r\n                                    className={cn({\r\n                                        [styles.selected]:\r\n                                            index === rowIndex &&\r\n                                            wordIndex === colIndex,\r\n                                    })}\r\n                                >\r\n                                    {' ' + item + ' '}\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    );\r\n                }}\r\n            </List>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BookRender;\r\n","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPauseSolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 27,\n    height: 36,\n    viewBox: \"0 0 27 36\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7.50006 36H2.50006C0.370593 36 0 34.2723 0 32.1429V3.85715C0 1.72769 0.370593 7.62939e-06 2.50006 7.62939e-06H7.50006C9.62952 7.62939e-06 10.0001 1.72769 10.0001 3.85715V32.1429C10.0001 34.2723 9.62952 36 7.50006 36Z\",\n    fill: \"black\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24.5001 36H19.5001C17.3706 36 17 34.2723 17 32.1429V3.85714C17 1.72768 17.3706 0 19.5001 0H24.5001C26.6295 0 27.0001 1.72768 27.0001 3.85714V32.1429C27.0001 34.2723 26.6295 36 24.5001 36Z\",\n    fill: \"black\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPauseSolid);\nexport default __webpack_public_path__ + \"static/media/pause-solid.be1337ee.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgMinusSolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 3,\n    viewBox: \"0 0 24 3\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.2857 0H1.71429C0.767679 0 0 0.447812 0 1V2C0 2.55219 0.767679 3 1.71429 3H22.2857C23.2323 3 24 2.55219 24 2V1C24 0.447812 23.2323 0 22.2857 0Z\",\n    fill: \"black\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMinusSolid);\nexport default __webpack_public_path__ + \"static/media/minus-solid.484e7581.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPlusSolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.2857 10H13.5V1.71429C13.5 0.767679 13.8038 0 12.8571 0H11.1429C10.1962 0 10.5 0.767679 10.5 1.71429V10H1.71429C0.767679 10 0 10.1962 0 11.1429V12C0 12.9466 0.553393 13 1.5 13H10.5V22C10.5 22.9466 10.1962 24 11.1429 24H12.8571C13.8038 24 13.5 22.9466 13.5 22V13H22.2857C23.2323 13 24 12.9466 24 12V11C24 10.0534 23.2323 10 22.2857 10Z\",\n    fill: \"black\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPlusSolid);\nexport default __webpack_public_path__ + \"static/media/plus-solid.fe79d37d.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAngleLeftSolid(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 11,\n    height: 20,\n    viewBox: \"0 0 11 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8.62132 0.424532C9.16548 -0.141511 10.0477 -0.141511 10.5919 0.424532C11.136 0.990575 11.136 1.90831 10.5919 2.47436L2.37868 11.0179C1.83453 11.584 0.952275 11.584 0.408119 11.0179C-0.136036 10.4519 -0.136036 9.53414 0.408119 8.96809L8.62132 0.424532Z\",\n    fill: \"black\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0.408117 11.0319C-0.136039 10.4659 -0.136039 9.54813 0.408117 8.98208C0.952272 8.41604 1.83452 8.41604 2.37868 8.98208L10.5919 17.5256C11.136 18.0917 11.136 19.0094 10.5919 19.5755C10.0477 20.1415 9.16548 20.1415 8.62132 19.5755L0.408117 11.0319Z\",\n    fill: \"black\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAngleLeftSolid);\nexport default __webpack_public_path__ + \"static/media/angle-left-solid.da55b788.svg\";\nexport { ForwardRef as ReactComponent };","import { memo } from 'react';\r\nimport cn from 'classnames';\r\n\r\nimport { ReactComponent as PlayIcon } from 'assets/icons/play-solid.svg';\r\nimport { ReactComponent as PauseIcon } from 'assets/icons/pause-solid.svg';\r\nimport { ReactComponent as MinusIcon } from 'assets/icons/minus-solid.svg';\r\nimport { ReactComponent as PlusIcon } from 'assets/icons/plus-solid.svg';\r\n\r\nimport styles from './styles.module.scss';\r\n\r\ninterface IReaderControlsProps {\r\n    mode: 'view' | 'play' | 'pause';\r\n    hidden: boolean;\r\n    wordsPerMinute: number;\r\n    onPlayPause: () => void;\r\n    onSpeedUp: () => void;\r\n    onSpeedDown: () => void;\r\n}\r\n\r\nconst ReaderControls = ({ mode, hidden, wordsPerMinute, onPlayPause, onSpeedUp, onSpeedDown }: IReaderControlsProps) => {\r\n    return (\r\n        <div \r\n            className={cn(styles.container, { \r\n                [styles.hidden]: hidden \r\n            })}\r\n            onClick={(e) => e.stopPropagation()}\r\n        >\r\n            <div className={styles.buttons}>\r\n                <div\r\n                    className={styles.button}\r\n                    onClick={onSpeedDown}\r\n                >\r\n                    <MinusIcon />\r\n                </div>\r\n                <div \r\n                    className={styles.button} \r\n                    onClick={onPlayPause}\r\n                >\r\n                    {mode === 'play' ? <PauseIcon /> : <PlayIcon />}\r\n                </div>\r\n                <div\r\n                    className={styles.button}\r\n                    onClick={onSpeedUp}\r\n                >\r\n                    <PlusIcon />\r\n                </div>\r\n            </div>\r\n            <div className={styles.bottom}>{wordsPerMinute}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(ReaderControls);\r\n","\r\nconst clamp = (min: number, value: number, max: number) => {\r\n    return Math.max(min, Math.min(value, max));\r\n}\r\n\r\nexport default clamp;","\r\nconst timestampToHumanTime = (timestamp: number) => {\r\n\r\n    const temp = Math.floor(timestamp / 1000);\r\n\r\n    let string = '';\r\n\r\n    const days = Math.floor((temp % 31536000) / 86400);\r\n    if(days) {\r\n        string += `${days}d `;\r\n    }\r\n    const hours = Math.floor((temp % 86400) / 3600);\r\n    if(hours) {\r\n        string += `${hours}h `;\r\n    }\r\n    const minutes = Math.floor((temp % 3600) / 60);\r\n    if(minutes) {\r\n        string += `${minutes}m `;\r\n    }\r\n    const seconds = temp % 60;\r\n    if(seconds) {\r\n        string += `${seconds}s`;\r\n    }\r\n\r\n    if(string === '') {\r\n        return '0';\r\n    }\r\n\r\n    return string;\r\n}\r\n\r\nexport {\r\n    timestampToHumanTime\r\n};","import cn from 'classnames';\r\nimport { useSettings } from 'Providers/Settings';\r\n\r\nimport clamp from 'utils/clamp';\r\nimport { timestampToHumanTime } from 'utils/time';\r\nimport styles from './styles.module.scss';\r\n\r\ninterface IReaderStatusBarProps {\r\n    mode: 'view' | 'play' | 'pause';\r\n    hidden: boolean;\r\n    totalWords: number;\r\n    currentWord: number;\r\n}\r\n\r\ninterface IReaderStatusBarStyleProps extends React.CSSProperties {\r\n    '--position': string;\r\n}\r\n\r\nconst ReaderStatusBar = ({\r\n    mode,\r\n    hidden,\r\n    totalWords,\r\n    currentWord,\r\n}: IReaderStatusBarProps) => {\r\n    const {\r\n        settings: { wordsPerMinute },\r\n    } = useSettings();\r\n\r\n    const timeToRead =\r\n        Math.floor((totalWords - currentWord) / (wordsPerMinute / 60)) * 1000;\r\n\r\n    const position = (100 / totalWords) * currentWord;\r\n    const wordsLeft = totalWords - currentWord;\r\n\r\n    return (\r\n        <div className={cn(styles.container, { [styles.hidden]: hidden, [styles.playing]: mode !== 'view' })}>\r\n            <div\r\n                className={styles.statusBar}\r\n                style={\r\n                    {\r\n                        '--position': `${clamp(0, position, 100)}%`,\r\n                    } as IReaderStatusBarStyleProps\r\n                }\r\n            />\r\n            <div className={styles.bottomBar}>\r\n                <span className={styles.timeLeft}>\r\n                    {timestampToHumanTime(timeToRead)}\r\n                </span>\r\n                <span className={styles.wordsLeft}>\r\n                    {wordsLeft} word{wordsLeft > 1 ? 's' : ''} left\r\n                </span>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ReaderStatusBar;\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFontIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 22,\n    height: 13,\n    viewBox: \"0 0 22 13\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.65137 10.4023H2.48145L1.54492 13H0.191406L3.99219 3.04688H5.14062L8.94824 13H7.60156L6.65137 10.4023ZM2.87793 9.32227H6.26172L4.56641 4.66699L2.87793 9.32227ZM17.5 10.3633H12.877L11.998 13H9.19434L13.958 0.203125H16.4014L21.1914 13H18.3877L17.5 10.3633ZM13.5889 8.22754H16.7881L15.1797 3.4375L13.5889 8.22754Z\",\n    fill: \"black\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFontIcon);\nexport default __webpack_public_path__ + \"static/media/font-icon.902ae4f9.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTextIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30,\n    height: 13,\n    viewBox: \"0 0 30 13\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3.43652 0.1875V2.49023H5.21191V3.74707H3.43652V9.64453C3.43652 10.0254 3.51562 10.3125 3.67383 10.5059C3.83203 10.6934 4.10156 10.7871 4.48242 10.7871C4.66992 10.7871 4.92773 10.752 5.25586 10.6816V12C4.82812 12.1172 4.41211 12.1758 4.00781 12.1758C3.28125 12.1758 2.7334 11.9561 2.36426 11.5166C1.99512 11.0771 1.81055 10.4531 1.81055 9.64453V3.74707H0.0791016V2.49023H1.81055V0.1875H3.43652ZM19.8545 5.96191L21.9639 2.49023H23.8623L20.751 7.19238L23.959 12H22.0781L19.8809 8.44043L17.6836 12H15.7939L19.002 7.19238L15.8906 2.49023H17.7715L19.8545 5.96191ZM27.7998 0.1875V2.49023H29.5752V3.74707H27.7998V9.64453C27.7998 10.0254 27.8789 10.3125 28.0371 10.5059C28.1953 10.6934 28.4648 10.7871 28.8457 10.7871C29.0332 10.7871 29.291 10.752 29.6191 10.6816V12C29.1914 12.1172 28.7754 12.1758 28.3711 12.1758C27.6445 12.1758 27.0967 11.9561 26.7275 11.5166C26.3584 11.0771 26.1738 10.4531 26.1738 9.64453V3.74707H24.4424V2.49023H26.1738V0.1875H27.7998Z\",\n    fill: \"black\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.0654 12.1758C9.77637 12.1758 8.72754 11.7539 7.91895 10.9102C7.11035 10.0605 6.70605 8.92676 6.70605 7.50879V7.20996C6.70605 6.2666 6.88477 5.42578 7.24219 4.6875C7.60547 3.94336 8.10938 3.36328 8.75391 2.94727C9.4043 2.52539 10.1074 2.31445 10.8633 2.31445C12.0996 2.31445 13.0605 2.72168 13.7461 3.53613C14.4316 4.35059 14.7744 5.5166 14.7744 7.03418V7.71094H8.33203C8.35547 8.64844 8.62793 9.40723 9.14941 9.9873C9.67676 10.5615 10.3447 10.8486 11.1533 10.8486C11.7275 10.8486 12.2139 10.7314 12.6123 10.4971C13.0107 10.2627 13.3594 9.95215 13.6582 9.56543L14.6514 10.3389C13.8545 11.5635 12.6592 12.1758 11.0654 12.1758ZM10.8633 3.65039C10.207 3.65039 9.65625 3.89062 9.21094 4.37109C8.76562 4.8457 8.49023 5.51367 8.38477 6.375H13.1484V6.25195C13.1016 5.42578 12.8789 4.78711 12.4805 4.33594C12.082 3.87891 11.543 3.65039 10.8633 3.65039Z\",\n    fill: \"#FF0000\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTextIcon);\nexport default __webpack_public_path__ + \"static/media/text-icon.93d71768.svg\";\nexport { ForwardRef as ReactComponent };","var _rect, _rect2, _rect3, _rect4;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgGuidelineIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 16,\n    viewBox: \"0 0 18 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    width: 18,\n    height: 2,\n    rx: 1,\n    fill: \"black\"\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    x: 6,\n    width: 2,\n    height: 6,\n    rx: 1,\n    fill: \"black\"\n  })), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    width: 18,\n    height: 2,\n    rx: 1,\n    transform: \"matrix(1 0 0 -1 0 16)\",\n    fill: \"black\"\n  })), _rect4 || (_rect4 = /*#__PURE__*/React.createElement(\"rect\", {\n    width: 2,\n    height: 6,\n    rx: 1,\n    transform: \"matrix(1 0 0 -1 6 16)\",\n    fill: \"black\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgGuidelineIcon);\nexport default __webpack_public_path__ + \"static/media/guideline-icon.1b31a321.svg\";\nexport { ForwardRef as ReactComponent };","\r\nimport { memo } from 'react';\r\nimport cn from 'classnames';\r\n\r\nimport styles from './styles.module.scss';\r\n\r\nimport { ReactComponent as AngleLeftIcon } from 'assets/icons/angle-left-solid.svg';\r\nimport { ReactComponent as FontIcon } from 'assets/icons/font-icon.svg';\r\nimport { ReactComponent as TextIcon } from 'assets/icons/text-icon.svg';\r\nimport { ReactComponent as GuidelineIcon } from 'assets/icons/guideline-icon.svg';\r\n\r\ninterface IReaderHeaderProps {\r\n    title: string;\r\n    mode: 'view' | 'play' | 'pause';\r\n    hidden: boolean;\r\n    onBackButton: () => void,\r\n    onChangeFont: () => void;\r\n    onSetORP: () => void;\r\n    onSetORPGuidelines: () => void;\r\n}\r\n\r\nconst ReaderHeader = ({\r\n    title,\r\n    mode,\r\n    hidden,\r\n    onBackButton,\r\n    onChangeFont,\r\n    onSetORP,\r\n    onSetORPGuidelines\r\n}: IReaderHeaderProps) => {\r\n\r\n    return (\r\n        <div \r\n            className={cn(styles.container, { \r\n                [styles.hidden]: hidden \r\n            })}\r\n            onClick={(e) => e.stopPropagation()}\r\n        >\r\n            <div\r\n                className={cn(styles.button, styles.backButton)}\r\n                onClick={onBackButton}\r\n            >\r\n                <AngleLeftIcon />\r\n            </div>\r\n            {mode === 'view' && <span className={styles.title}>{title}</span>}\r\n            <div className={styles.buttons}>\r\n                {mode !== 'view' && (\r\n                    <>\r\n                        <div className={cn(styles.button)} onClick={onChangeFont}>\r\n                            <FontIcon />\r\n                        </div>\r\n                        <div\r\n                            className={cn(styles.button)}\r\n                            onClick={onSetORP}\r\n                        >\r\n                            <TextIcon />\r\n                        </div>\r\n                        <div\r\n                            className={cn(styles.button)}\r\n                            onClick={onSetORPGuidelines}\r\n                        >\r\n                            <GuidelineIcon />\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(ReaderHeader);\r\n","import { useEffect, useState } from 'react';\r\n\r\n/** Milliseconds representing forever in the future. */\r\nconst never = Number.MAX_SAFE_INTEGER;\r\n\r\nfunction useAccurateTimer(\r\n    isPlaying: boolean,\r\n    delay: number,\r\n    callback: () => void | number\r\n) {\r\n    const now = new Date().getTime();\r\n    // This is used to trigger a render that checks to fire the timer\r\n    const [, setCheckTime] = useState(now);\r\n    const [nextFireTime, setNextFireTime] = useState(never);\r\n\r\n    useEffect(() => {\r\n        if (isPlaying) {\r\n            const currentTime = new Date().getTime() + delay;\r\n            const newNextFireTime = delay\r\n                ? Math.max(currentTime, currentTime)\r\n                : never;\r\n            setNextFireTime(newNextFireTime);\r\n        } else {\r\n            setNextFireTime(never);\r\n        }\r\n    }, [isPlaying, delay]);\r\n\r\n    useEffect(() => {\r\n        let timeout: NodeJS.Timeout;\r\n\r\n        // If it's a timer and it isn't paused...\r\n        if (delay && isPlaying) {\r\n            // Check if we're overdue on any events being fired (super low delay or expensive callback)\r\n            const overdueCalls = Math.max(\r\n                0,\r\n                Math.floor((now - nextFireTime) / delay)\r\n            );\r\n            // If we're overdue, this means we're not firing callbacks fast enough and need to prevent\r\n            // exceeding the maximum update depth.\r\n            // To do this, we only fire the callback on an even number of overdues (including 0, no overdues).\r\n            // Else, we wait a little, then try again.\r\n            if (overdueCalls % 2 !== 1) {\r\n                // If the timer is up...\r\n                if (now >= nextFireTime) {\r\n                    let userDelay = 0;\r\n                    // Call the callback\r\n                    if (typeof callback === 'function') {\r\n                        try {\r\n                            userDelay = callback() || 0;\r\n                        } catch (e) {\r\n                            console.error(e);\r\n                        }\r\n                    }\r\n                    // Calculate and set the next time the timer should fire\r\n                    const overdueElapsedTime = overdueCalls * delay;\r\n                    const newFireTime = Math.max(\r\n                        now,\r\n                        nextFireTime + delay + overdueElapsedTime + userDelay\r\n                    );\r\n                    setNextFireTime(newFireTime);\r\n                    // Set a timeout to check and fire the timer when time's up\r\n                    timeout = setTimeout(() => {\r\n                        // This merely triggers a rerender to check if the timer can fire.\r\n                        setCheckTime(new Date().getTime());\r\n                    }, Math.max(newFireTime - new Date().getTime(), 1));\r\n                }\r\n                // Time is not up yet. Set a timeout to check and fire when time's up\r\n                else if (nextFireTime < never) {\r\n                    timeout = setTimeout(() => {\r\n                        // This merely triggers a rerender to check if the timer can fire.\r\n                        setCheckTime(new Date().getTime());\r\n                        // Home in on the exact time to fire.\r\n                    }, Math.max(nextFireTime - new Date().getTime(), 1));\r\n                }\r\n            } else {\r\n                // Relief valve to avoid maximum update depth exceeded errors.\r\n                // When calls become overdue, there's too expensive of a callback or too low of a delay to keep up.\r\n                // In both cases, the React max update stack will be exceeded due to repeated firings.\r\n                // To relieve this, don't check to fire this time around, but check again in a short time.\r\n                timeout = setTimeout(() => {\r\n                    setCheckTime(new Date().getTime());\r\n                }, 20);\r\n            }\r\n        }\r\n\r\n        return () => {\r\n            clearTimeout(timeout);\r\n        };\r\n    }, [now, nextFireTime, isPlaying, delay, callback]);\r\n}\r\n\r\nexport default useAccurateTimer;\r\n","import { memo, useCallback, useEffect, useRef, useState } from 'react';\r\nimport cn from 'classnames';\r\nimport useAccurateTimer from 'hooks/useAccurateTimer';\r\nimport clamp from 'utils/clamp';\r\nimport styles from './styles.module.scss';\r\nimport { useSettings } from 'Providers/Settings';\r\n\r\ninterface IRSVPReaderProps {\r\n    width: number;\r\n    mode: 'view' | 'play' | 'pause';\r\n    text: string;\r\n    initialIndex?: number;\r\n    onNextWord?: (index: number) => void;\r\n}\r\n\r\ninterface IRSPVReaderState {\r\n    currentWord: string;\r\n    currentIndex: number;\r\n    hasNextWord: boolean;\r\n    items: string[];\r\n}\r\n\r\nfunction usePrevious(value: any) {\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current = value;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nconst getOrpPos = (length: number) => {\r\n    return length === 1 ? 1 : Math.ceil((length - 1) / 4) + 1;\r\n}\r\n\r\nclass CharMeasurer {\r\n    private ctx: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D;\r\n    private templateChars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnoprstuvwxyz1234567890~!@#$%^&*()_+={}:'\\\"\\\\,./<>?\";\r\n    private chars: Map<string, number> = new Map();\r\n    constructor() {\r\n        if(\"OffscreenCanvas\" in globalThis) {\r\n            this.ctx = new OffscreenCanvas(1, 1).getContext('2d')!;\r\n        } else {\r\n            this.ctx = document.createElement('canvas').getContext('2d')!;\r\n        }        \r\n        this.ctx.font = `${48}px SFMono`;\r\n        this.measureChars();\r\n    }\r\n    private measure(char: string) {\r\n        return this.ctx.measureText(char).width\r\n    }\r\n    measureChars() {\r\n        this.chars = new Map(this.templateChars.split('').map(v => [v, this.measure(v)]));\r\n    }\r\n    setFont() {\r\n        this.measureChars();\r\n    }\r\n    longestWidth() {\r\n        let maxWidth = 0;\r\n        this.chars.forEach((width, char) => {\r\n            if (width > maxWidth) {\r\n                // console.log(char)\r\n                maxWidth = width;\r\n            }\r\n        });\r\n        return maxWidth;\r\n    }\r\n    measureChar(char: string) {\r\n        let charWidth = this.chars.get(char);\r\n        if (!charWidth) {\r\n            charWidth = this.measure(char);\r\n            this.chars.set(char, charWidth);\r\n        }\r\n        return charWidth;\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction useORPWord({ word, width }: { word: string; width: number; }) {\r\n\r\n    const measureRef = useRef<CharMeasurer | null>(null);\r\n\r\n    useEffect(() => {\r\n        measureRef.current = new CharMeasurer();\r\n    }, []);\r\n\r\n    const [{ orpMiddlePointPx, maxOffset, maxWords }, set] = useState({\r\n        maxOffset: 0,\r\n        maxWords: 0,\r\n        orpMiddlePointPx: 0,\r\n    });\r\n\r\n    useEffect(() => {\r\n        if(measureRef.current) {\r\n            // console.log(measureRef.current.longestWidth())\r\n            const maxWords = Math.floor((width || 0) / measureRef.current.longestWidth()) - 1;\r\n            const orpPos = getOrpPos(maxWords) * measureRef.current.longestWidth() + measureRef.current.longestWidth() / 2;\r\n            const maxOffset = getOrpPos(maxWords) + 1;\r\n\r\n            set({\r\n                maxOffset,\r\n                maxWords: maxWords - (maxOffset - getOrpPos(maxWords)),\r\n                orpMiddlePointPx: orpPos,\r\n            })\r\n        }\r\n    }, [width]);\r\n\r\n    let r = word.trim().substr(0, maxWords);\r\n\r\n    const trimmedWord = r.replaceAll(/^[^a-zа-я\\d]*|[^a-zа-я\\d]*$/gi, '');\r\n    // const length = trimmedWord.split('').map(v => measurer.measureChar(v));\r\n    const orp = getOrpPos(trimmedWord.length);\r\n\r\n    const lpad = ''.padStart(maxOffset - orp, '\\u00A0');\r\n    const chars = [\r\n        <span key={1}>{lpad + r.substr(0, orp - 1)}</span>,\r\n        <span key={2}>{r[orp - 1]}</span>,\r\n        <span key={3}>{trimmedWord.length > 2 ? r.substr(orp) : ''}</span>\r\n    ];\r\n\r\n    return { chars, orpMiddlePointPx, maxOffset };\r\n\r\n}\r\n\r\nconst RSVPReader = ({\r\n    width,\r\n    mode,\r\n    text,\r\n    initialIndex = 0,\r\n    onNextWord,\r\n}: IRSVPReaderProps) => {\r\n    const { settings } = useSettings();\r\n\r\n    const [\r\n        { currentWord, currentIndex, hasNextWord },\r\n        set,\r\n    ] = useState<IRSPVReaderState>({\r\n        currentWord: '',\r\n        currentIndex: 0,\r\n        hasNextWord: false,\r\n        items: [],\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (!text) {\r\n            return;\r\n        }\r\n\r\n        const items = text.split(' ');\r\n        const wordCount = items.length;\r\n\r\n        const state = {\r\n            currentWord: '',\r\n            currentIndex: 0,\r\n            hasNextWord: false,\r\n            items,\r\n        };\r\n\r\n        if (wordCount > 0) {\r\n            const initial = clamp(0, initialIndex || 0, wordCount);\r\n\r\n            const currentWord = items[initial];\r\n\r\n            if (currentWord) {\r\n                state.currentIndex = initial;\r\n                state.currentWord = currentWord;\r\n                state.hasNextWord = items.length > initial;\r\n            }\r\n        }\r\n\r\n        set(state);\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [text, onNextWord]);\r\n\r\n    const prevMode = usePrevious(mode);\r\n    useEffect(() => {\r\n        if (prevMode === 'view' && mode !== 'view') {\r\n            const items = text.split(' ');\r\n            const wordCount = items.length;\r\n\r\n            const state = {\r\n                currentWord: '',\r\n                currentIndex: 0,\r\n                hasNextWord: false,\r\n                items,\r\n            };\r\n\r\n            if (wordCount > 0) {\r\n                const initial = clamp(0, initialIndex || 0, wordCount);\r\n\r\n                const currentWord = items[initial];\r\n\r\n                if (currentWord) {\r\n                    state.currentIndex = initial;\r\n                    state.currentWord = currentWord;\r\n                    state.hasNextWord = items.length > initial;\r\n                }\r\n            }\r\n\r\n            set(state);\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [prevMode, mode]);\r\n\r\n    useEffect(() => {\r\n        onNextWord?.(currentIndex);\r\n    }, [onNextWord, currentIndex]);\r\n\r\n    const onTick = useCallback(() => {\r\n        set((currState) => {\r\n            const newState = { ...currState };\r\n            const nextWord = currState.items[currState.currentIndex + 1];\r\n            if (nextWord) {\r\n                newState.currentWord = nextWord;\r\n                newState.currentIndex++;\r\n                newState.hasNextWord =\r\n                    currState.items.length > newState.currentIndex;\r\n            } else {\r\n                newState.hasNextWord = false;\r\n            }\r\n            return newState;\r\n        });\r\n    }, []);\r\n\r\n    const delay = (60 / settings.wordsPerMinute) * 1000;\r\n    useAccurateTimer(mode === 'play' && hasNextWord, delay, onTick);\r\n    const { chars, orpMiddlePointPx } = useORPWord({\r\n        word: currentWord,\r\n        width,\r\n    });\r\n\r\n    if (mode === 'view') {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className={styles.container}\r\n            style={{\r\n                fontFamily: settings.fontFamily,\r\n                fontSize: `${settings.fontSize}px`,\r\n            }}\r\n        >\r\n            <div\r\n                className={cn(styles.ORPGuideline, {\r\n                    [styles.disabled]: !settings.ORPGuideLine,\r\n                    [styles.orp]: settings.ORP,\r\n                })}\r\n                style={{\r\n                    '--orpPos': `${orpMiddlePointPx}px`,\r\n                    fontFamily: 'SFMono',\r\n                    lineHeight: '82px',\r\n                } as any}\r\n            >\r\n                {chars}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default memo(RSVPReader);\r\n","import { useEffect, useState } from \"react\";\r\n\r\nlet canvasCtx: CanvasRenderingContext2D | null = null;\r\n\r\nfunction measureFont(fontFamily: string, fontSize: number) {\r\n\r\n    if(!canvasCtx) {\r\n        canvasCtx = document.createElement(\"canvas\").getContext(\"2d\");\r\n    }\r\n\r\n    if(canvasCtx) {\r\n        const text = \"B\";\r\n        canvasCtx.font = `${fontSize}px ${fontFamily}`;\r\n        canvasCtx.textBaseline = 'top';\r\n        const textMetrics = canvasCtx.measureText(text);\r\n        const width = Math.abs(textMetrics.actualBoundingBoxLeft) + Math.abs(textMetrics.actualBoundingBoxRight);\r\n\r\n        // console.log(width / text.length)\r\n        return width / text.length;\r\n    }\r\n    \r\n    return 0;\r\n}\r\n\r\nfunction useFontWidth(fontFamily: string, fontSize: number) {\r\n    const [fontWidth, setFontWidth] = useState(measureFont(fontFamily, fontSize));\r\n    useEffect(() => {\r\n        setFontWidth(measureFont(fontFamily, fontSize));\r\n    }, [fontFamily, fontSize]);\r\n\r\n    return fontWidth;\r\n}\r\n\r\nexport default useFontWidth;","import cn from 'classnames';\r\nimport useBackgroundColor from 'hooks/useBackgroundColor';\r\nimport useElementSize from 'hooks/useElementSize';\r\nimport { useSettings } from 'Providers/Settings';\r\nimport { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { IBookInfo } from '../../Providers/Library';\r\nimport { useReadingStats } from '../../Providers/ReadingStats';\r\nimport BookRender from '../BookRender';\r\nimport ReaderControls from '../ReaderControls';\r\nimport ReaderStatusBar from '../ReaderStatusBar';\r\nimport ReaderHeader from '../ReaderHeader';\r\nimport RSVPReader from '../RSVPReader';\r\nimport styles from './styles.module.scss';\r\n\r\nimport useFontWidth from 'hooks/useFontWidth';\r\n\r\ninterface IBookReaderProps {\r\n    info: IBookInfo;\r\n    text: string;\r\n\r\n    onBack: () => void,\r\n}\r\n\r\nfunction wrapText(text: string, maxWidth: number) {\r\n    if(maxWidth === 0) {\r\n        return [];\r\n    }\r\n    const words = text.split(' ');\r\n    const rows = [];\r\n    let bufferRow: string[] = [];\r\n    let index = 0;\r\n    for(const word of words) {\r\n        bufferRow.push(word);\r\n        if(bufferRow.join(' ').length > maxWidth) {\r\n            const wrappedWord = bufferRow.pop();\r\n            rows.push({\r\n                index,\r\n                text: bufferRow.join(' '),\r\n                words: bufferRow,\r\n            });\r\n            index += bufferRow.length;\r\n            bufferRow = [wrappedWord!];\r\n        }        \r\n    }   \r\n\r\n    return rows;    \r\n}\r\n\r\nfunction useWrappedText(text: string, maxWidth: number) {\r\n    const [rows, setRows] = useState<Array<{ index: number; text: string; words: string[]; }>>([]); \r\n    useEffect(() => {\r\n        setRows(wrapText(text, maxWidth));\r\n    }, [text, maxWidth]);\r\n    return rows;\r\n}\r\n\r\nconst INCREMENT_VALUE = 20;\r\n\r\nconst BookReader = ({ info, text, onBack }: IBookReaderProps) => {\r\n\r\n    const { settings, set } = useSettings();\r\n\r\n    const [uiHidden, setUiHidden] = useState(false);\r\n    const [mode, setMode] = useState<'view' | 'play' | 'pause'>('view');\r\n    const { stats, setStats } = useReadingStats(info.id);\r\n    const onNextWord = useCallback(\r\n        (index: number) => setStats(info.id, 'index', index),\r\n        [info.id, setStats]\r\n    );\r\n\r\n    useBackgroundColor(mode === 'view' ? '#FEFEFE' : '#edd1b0');\r\n\r\n    const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    const togglePlay = useCallback(() => {\r\n        setMode((value) => {\r\n            if (value === 'play') {\r\n                if (timerRef.current) {\r\n                    clearTimeout(timerRef.current);\r\n                    timerRef.current = null;\r\n                }\r\n                return 'pause';\r\n            }\r\n            return 'play';\r\n        });\r\n    }, []);\r\n\r\n    const onCurrentIndexChange = useCallback(\r\n        (index: number) => {\r\n            setStats(info.id, 'index', index);\r\n        },\r\n        [info.id, setStats]\r\n    );\r\n\r\n    const ref = useRef<HTMLDivElement>(null);\r\n    const { width } = useElementSize(ref);\r\n\r\n    // Header\r\n\r\n    const onBackButton = useCallback(() => {\r\n        if (mode === 'pause' || mode === 'play') {\r\n            setMode('view');\r\n        } else {\r\n            onBack();\r\n        }\r\n    }, [mode, onBack]);\r\n\r\n    const onChangeFont = useCallback(() => {\r\n        togglePlay();\r\n    }, [togglePlay]);\r\n    const onSetORP = useCallback(() => set('ORP', v => !v), [set]);\r\n    const onSetORPGuidelines = useCallback(() => set('ORPGuideLine', v => !v), [set]);\r\n\r\n    // Controls\r\n\r\n    const onPlayPause = useCallback(() => togglePlay(), [togglePlay]);\r\n    const onSpeedUp = useCallback(() => set('wordsPerMinute', (prev) => prev + INCREMENT_VALUE), [set]);\r\n    const onSpeedDown = useCallback(() => set('wordsPerMinute', (prev) => prev - INCREMENT_VALUE), [set]);\r\n\r\n    const onReaderClick = useCallback(() => {\r\n        if (mode === 'play' && uiHidden) {\r\n            setUiHidden(false);\r\n        } else if (mode === 'play' && !uiHidden) {\r\n            setUiHidden(true);\r\n        } else if (mode !== 'play' && uiHidden) {\r\n            setUiHidden(false);\r\n        }\r\n    }, [mode, uiHidden]);\r\n\r\n    const fontInfo = {\r\n        fontFamily: 'SFMono',\r\n        fontSize: 16,\r\n        fontWeight: 'normal',\r\n        lineHeight: 17\r\n    }\r\n\r\n    const fontWidth = useFontWidth(fontInfo.fontFamily, fontInfo.fontSize)\r\n    const rows = useWrappedText(text, Math.floor(width / fontWidth));\r\n\r\n    return (\r\n        <div\r\n            className={cn(styles.container, {\r\n                [styles.playing]: mode !== 'view',\r\n            })}\r\n            onClick={onReaderClick}\r\n        >\r\n            <ReaderHeader\r\n                mode={mode}\r\n                hidden={uiHidden}\r\n                title={info.title}\r\n\r\n                onBackButton={onBackButton}\r\n                onChangeFont={onChangeFont}\r\n                onSetORP={onSetORP}\r\n                onSetORPGuidelines={onSetORPGuidelines}\r\n                \r\n            />\r\n            <div className={styles.content}>\r\n                <div ref={ref} className={styles.reader}>\r\n                    <RSVPReader\r\n                        width={width}\r\n                        mode={mode}\r\n                        text={text}\r\n                        initialIndex={stats.index}\r\n                        onNextWord={onNextWord}\r\n                    />\r\n                    <BookRender\r\n                        fontInfo={fontInfo}\r\n                        width={width}\r\n                        mode={mode}\r\n                        rows={rows}\r\n                        currentIndex={stats.index}\r\n                        onCurrentIndexChange={onCurrentIndexChange}\r\n                    />\r\n                </div>\r\n                <ReaderControls\r\n                    mode={mode}\r\n                    hidden={uiHidden}\r\n                    wordsPerMinute={settings.wordsPerMinute}\r\n                    onPlayPause={onPlayPause}\r\n                    onSpeedUp={onSpeedUp}\r\n                    onSpeedDown={onSpeedDown}\r\n                />\r\n                <ReaderStatusBar\r\n                    mode={mode}\r\n                    hidden={uiHidden}\r\n                    totalWords={info.totalWords}\r\n                    currentWord={stats.index}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BookReader;\r\n","\r\nimport BookReader from 'Components/BookReader';\r\nimport { IBookInfo, useLibraryContext } from 'Providers/Library';\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport styles from './styles.module.scss';\r\n\r\nfunction useBook(id: string) {\r\n    const { getBook } = useLibraryContext();\r\n\r\n    const [bookData, setBook] =\r\n        useState<{ info: IBookInfo; items: string[]; text: string[] } | null>(\r\n            null\r\n        );\r\n\r\n    useEffect(() => {\r\n        getBook(id).then(({ info, items }) => {\r\n            setBook({\r\n                info,\r\n                items,\r\n                text: items.join(' ').split(' '),\r\n            });\r\n        });\r\n    }, [id, getBook]);\r\n\r\n    return bookData;\r\n}\r\n\r\nconst Reader = () => {\r\n\r\n    const { id } = useParams<{ id: string }>();\r\n    const bookInfo = useBook(id);\r\n    const history = useHistory();\r\n    const onBack = useCallback(() => history.goBack(), [history]);\r\n\r\n    \r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            {bookInfo && \r\n                <BookReader\r\n                    info={{\r\n                        ...bookInfo.info,\r\n\r\n                        totalSentences: 1000,\r\n                        totalWords: bookInfo.text.length\r\n                    }}\r\n                    text={bookInfo.text.join(' ')}\r\n\r\n                    onBack={onBack}\r\n                />\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Reader;\r\n","import cn from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\n// import { timeToRead, completionRate } from '../../utils/wordTime';\r\nimport styles from './styles.module.scss';\r\n\r\nimport { IBookInfo } from 'Providers/Library';\r\nimport { useRef } from 'react';\r\n\r\ninterface IBookProps {\r\n    book: IBookInfo;\r\n    stats: {\r\n        completed: string;\r\n        timeToRead: string;\r\n    };\r\n    onClick: (id: string) => void;\r\n}\r\n\r\nfunction Book({ book, stats, onClick }: IBookProps) {\r\n\r\n    const wrapperRef = useRef<HTMLDivElement>(null);\r\n\r\n    // const completed = completionRate(1500, 1000);\r\n    // const ttr = timeToRead(1500, 1000, 320);\r\n    // console.log(book)\r\n    return (\r\n        <Link to={`/book/${book.id}`} className={styles.container}>\r\n            <div\r\n                className={cn(styles.book, styles.nocover, {\r\n                    [styles.nocover]: !book.cover,\r\n                    [styles.nocover]: book.cover,\r\n                })}\r\n                // style={\r\n                //     book.cover\r\n                //         ? ({ '--cover': `url(${book.cover})` } as any)\r\n                //         : {}\r\n                // }\r\n            >\r\n                {(book.cover || !book.cover) && (\r\n                    <div ref={wrapperRef} className={styles.bookWrapper}>\r\n                        <svg >\r\n                            <foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">\r\n                                <div className={styles.title}>{book.title}</div>\r\n                            </foreignObject>\r\n                        </svg>\r\n                        <svg >\r\n                            <foreignObject x=\"0\" y=\"50%\" width=\"100%\" height=\"100%\">\r\n                                <div className={styles.author}>{book.creator}</div>\r\n                            </foreignObject>\r\n                        </svg>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div className={styles.bottom}>\r\n                <div>\r\n                    {stats.completed !== '100'\r\n                        ? `${stats.completed} %`\r\n                        : 'FINISHED'}\r\n                </div>\r\n                <div>{stats.timeToRead}</div>\r\n            </div>\r\n        </Link>\r\n    );\r\n}\r\n\r\nexport default Book;\r\n","import { useCallback } from 'react';\r\n\r\nfunction useFileInput(options: any, callback: (files: File[]) => void) {\r\n    const onAction = useCallback(() => {\r\n        const input = document.createElement('input');\r\n        input.type = 'file';\r\n        input.multiple = true;\r\n        input.onchange = (event) => {\r\n            if (!event.target || (event.target as any).files.length === 0) {\r\n                return callback([]);\r\n            }\r\n            callback((event.target as any).files);\r\n        };\r\n        input.click();\r\n    }, [callback]);\r\n\r\n    return onAction;\r\n}\r\n\r\nexport default useFileInput;\r\n","\r\nimport styles from './styles.module.scss';\r\nimport { ReactComponent as PlusIcon } from 'assets/icons/plus-solid.svg'; \r\n\r\ninterface IHeaderProps {\r\n    title: string;\r\n    editMode?: boolean;\r\n    onBookAdd?: () => void;\r\n    onEdit?: () => void;\r\n}\r\n\r\nconst Header = ({ title, onBookAdd }: IHeaderProps) => {\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.leftButton} onClick={onBookAdd}>\r\n                <PlusIcon/>\r\n            </div>\r\n            <div className={styles.title}>{title}</div>\r\n            <div className={styles.rightButton}>Edit</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Header;","import Book from '../../Components/Book';\r\nimport styles from './styles.module.scss';\r\n\r\nimport { useLibraryContext } from '../../Providers/Library';\r\n// import { useReadingStatsContext } from '../../Providers/ReadingStats';\r\n\r\nimport useFileInput from '../../hooks/useFileInput';\r\nimport { useCallback } from 'react';\r\n\r\nimport Header from 'Pages/Library/Header';\r\nimport useBackgroundColor from 'hooks/useBackgroundColor';\r\n\r\nconst Library = () => {\r\n    useBackgroundColor('#FEFEFE');\r\n\r\n    const { library, loadBooks } = useLibraryContext();\r\n    // const { getBookStats } = useReadingStatsContext();\r\n\r\n    const onAdd = useFileInput({ multiple: true }, async (files: File[]) => {\r\n        if (files.length === 0) {\r\n            return;\r\n        }\r\n        await loadBooks(files);\r\n    });\r\n\r\n    const onBookClick = useCallback((id: string) => {\r\n  \r\n\r\n    }, []);\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <Header title=\"Library\" onBookAdd={onAdd} />\r\n            <div className={styles.listContainer}>\r\n                <div className={styles.list}>\r\n                    {library.map((book) => (\r\n                        <Book\r\n                            key={book.id}\r\n                            book={book}\r\n                            stats={{\r\n                                completed: '100',\r\n                                timeToRead: '1',\r\n                            }}\r\n                            onClick={onBookClick}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Library;\r\n","\r\nimport styles from './styles.module.scss';\r\n\r\ninterface IHeaderProps {\r\n    title: string;\r\n}\r\n\r\nconst Header = ({ title }: IHeaderProps) => {\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.leftButton}></div>\r\n            <div className={styles.title}>{title}</div>\r\n            <div className={styles.rightButton}></div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Header;","\r\nimport Header from './Header';\r\nimport styles from './styles.module.scss';\r\n\r\ninterface ISettingsProps {\r\n\r\n}\r\n\r\n// eslint-disable-next-line no-empty-pattern\r\nconst Settings = ({}: ISettingsProps) => {\r\n    return (\r\n        <div className={styles.container}>\r\n            <Header title=\"Settings\" />\r\n            <div>\r\n                \r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Settings;","\r\nimport cn from 'classnames';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport styles from './styles.module.scss';\r\n\r\ninterface IMenuProps {\r\n\r\n}\r\n\r\n// eslint-disable-next-line no-empty-pattern\r\nconst Menu = ({}: IMenuProps) => {\r\n    const location = useLocation();\r\n    return (\r\n        <div className={styles.container}>\r\n            <Link\r\n                to=\"/\" \r\n                className={cn(styles.item, { \r\n                    [styles.selected]: location.pathname === '/'\r\n                })}\r\n            >\r\n                Library\r\n            </Link>\r\n            <Link\r\n                to=\"/settings\"\r\n                className={cn(styles.item, { \r\n                    [styles.selected]: location.pathname === '/settings'\r\n                })}\r\n            >\r\n                Settings\r\n            </Link>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Menu;","\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport Providers from 'Providers';\r\n\r\nimport Reader from './Pages/Reader';\r\nimport Library from './Pages/Library';\r\nimport Settings from 'Pages/Settings';\r\nimport Menu from 'Components/Menu';\r\n\r\nimport styles from './styles.module.scss';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className={styles.container}>\r\n      <Providers>\r\n        <Switch>\r\n          <Route path=\"/book/:id\" exact component={Reader} />\r\n          <Route path=\"/\" >\r\n              <Route path=\"/\" exact component={Library} />\r\n              <Route path=\"/settings\" exact component={Settings} />\r\n              <Menu />\r\n          </Route>\r\n        </Switch>\r\n      </Providers>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost' ||\r\n      // [::1] is the IPv6 localhost address.\r\n      window.location.hostname === '[::1]' ||\r\n      // 127.0.0.0/8 are considered localhost for IPv4.\r\n      window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n  );\r\n  \r\n  type Config = {\r\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n  };\r\n  \r\n  export function register(config?: Config) {\r\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n      // The URL constructor is available in all browsers that support SW.\r\n      const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n      if (publicUrl.origin !== window.location.origin) {\r\n        // Our service worker won't work if PUBLIC_URL is on a different origin\r\n        // from what our page is served on. This might happen if a CDN is used to\r\n        // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n        return;\r\n      }\r\n  \r\n      window.addEventListener('load', () => {\r\n        const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n  \r\n        if (isLocalhost) {\r\n          // This is running on localhost. Let's check if a service worker still exists or not.\r\n          checkValidServiceWorker(swUrl, config);\r\n  \r\n          // Add some additional logging to localhost, pointing developers to the\r\n          // service worker/PWA documentation.\r\n          navigator.serviceWorker.ready.then(() => {\r\n            console.log(\r\n              'This web app is being served cache-first by a service ' +\r\n                'worker. To learn more, visit https://cra.link/PWA'\r\n            );\r\n          });\r\n        } else {\r\n          // Is not localhost. Just register service worker\r\n          registerValidSW(swUrl, config);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  function registerValidSW(swUrl: string, config?: Config) {\r\n    navigator.serviceWorker\r\n      .register(swUrl)\r\n      .then((registration) => {\r\n        registration.onupdatefound = () => {\r\n          const installingWorker = registration.installing;\r\n          if (installingWorker == null) {\r\n            return;\r\n          }\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === 'installed') {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the updated precached content has been fetched,\r\n                // but the previous service worker will still serve the older\r\n                // content until all client tabs are closed.\r\n                console.log(\r\n                  'New content is available and will be used when all ' +\r\n                    'tabs for this page are closed. See https://cra.link/PWA.'\r\n                );\r\n  \r\n                // Execute callback\r\n                if (config && config.onUpdate) {\r\n                  config.onUpdate(registration);\r\n                }\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // \"Content is cached for offline use.\" message.\r\n                console.log('Content is cached for offline use.');\r\n  \r\n                // Execute callback\r\n                if (config && config.onSuccess) {\r\n                  config.onSuccess(registration);\r\n                }\r\n              }\r\n            }\r\n          };\r\n        };\r\n      })\r\n      .catch((error) => {\r\n        console.error('Error during service worker registration:', error);\r\n      });\r\n  }\r\n  \r\n  function checkValidServiceWorker(swUrl: string, config?: Config) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl, {\r\n      headers: { 'Service-Worker': 'script' },\r\n    })\r\n      .then((response) => {\r\n        // Ensure service worker exists, and that we really are getting a JS file.\r\n        const contentType = response.headers.get('content-type');\r\n        if (\r\n          response.status === 404 ||\r\n          (contentType != null && contentType.indexOf('javascript') === -1)\r\n        ) {\r\n          // No service worker found. Probably a different app. Reload the page.\r\n          navigator.serviceWorker.ready.then((registration) => {\r\n            registration.unregister().then(() => {\r\n              window.location.reload();\r\n            });\r\n          });\r\n        } else {\r\n          // Service worker found. Proceed as normal.\r\n          registerValidSW(swUrl, config);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        console.log('No internet connection found. App is running in offline mode.');\r\n      });\r\n  }\r\n  \r\n  export function unregister() {\r\n    if ('serviceWorker' in navigator) {\r\n      navigator.serviceWorker.ready\r\n        .then((registration) => {\r\n          registration.unregister();\r\n        })\r\n        .catch((error) => {\r\n          console.error(error.message);\r\n        });\r\n    }\r\n  }","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from 'App';\r\n\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nimport './styles/index.scss';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.register();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}