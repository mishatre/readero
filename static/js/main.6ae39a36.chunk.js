(this.webpackJsonpreadero=this.webpackJsonpreadero||[]).push([[0],{13:function(e,t,n){e.exports={container:"styles_container__xRGQ3",topLine:"styles_topLine__9Xzw9",controls:"styles_controls__aw6aK",button:"styles_button__1pqxT",wordsPerMinute:"styles_wordsPerMinute__2rsVl",stats:"styles_stats__2RUm0",bar:"styles_bar__xDlIR",bottom:"styles_bottom__1djMp"}},14:function(e,t,n){e.exports={container:"styles_container__3L1DU",book:"styles_book__3kr_u",cover:"styles_cover__6Uu98",nocover:"styles_nocover__2Rzyk",bookWrapper:"styles_bookWrapper__385Le",title:"styles_title__2fozK",author:"styles_author__1rUEC",bottom:"styles_bottom__3ye7t"}},18:function(e,t,n){e.exports={container:"styles_container__HUCkD",header:"styles_header__3miEM",title:"styles_title__1elQZ",add:"styles_add__h5c36",listContainer:"styles_listContainer__26jV9",list:"styles_list__1Gvkp",bottomMenu:"styles_bottomMenu__2YYEk"}},24:function(e,t,n){e.exports={container:"styles_container__1BmkX",b:"styles_b__1Qifu",list:"styles_list__1RbfW",sentenceRow:"styles_sentenceRow__1tuBL",selected:"styles_selected__3yVPV"}},25:function(e,t,n){e.exports={container:"styles_container__1qrsw",textPlayer:"styles_textPlayer__39i09",text:"styles_text__1rirC",selected:"styles_selected__305tA",playing:"styles_playing__DnXTA"}},34:function(e,t,n){e.exports={container:"styles_container__PILz8",title:"styles_title__3qgYC"}},41:function(e,t,n){e.exports={container:"styles_container__3TSyu"}},49:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(37),i=n.n(c),o=(n(49),n(5)),s=n(20),l=n(10),u=n(6),f=n(44),d=n(2);function b(){var e=Object(r.createContext)(void 0);return[function(){var t=Object(r.useContext)(e);if(void 0===t)throw new Error("useCtx must be inside a Provider with a value");return t},e.Provider]}var p=n(1),j={font:"Kazemir",fontSize:16,wordsPerMinute:320,useORP:!0,slowDownOnLongWords:!0},v=b(),O=Object(d.a)(v,2),m=O[0],h=O[1],x=function(e){var t=e.children,n=Object(r.useState)(null),a=Object(d.a)(n,2),c=a[0],i=a[1];Object(r.useEffect)((function(){var e={},t=j.wordsPerMinute,n=Object(f.a)(j,["wordsPerMinute"]),r=localStorage.getItem("settings");r?Object.assign(e,JSON.parse(r)):(localStorage.setItem("settings",JSON.stringify(n)),Object.assign(e,n));var a=localStorage.getItem("wordsPerMinute");a?e.wordsPerMinute=Number(a):(localStorage.setItem("wordsPerMinute",String(t)),e.wordsPerMinute=t),i(e)}),[]);var o=Object(r.useCallback)((function(e,t){i((function(n){return n?("wordsPerMinute"===e?localStorage.setItem("wordsPerMinute",String(t)):localStorage.setItem("settings",JSON.stringify(Object(u.a)(Object(u.a)({},n),{},Object(l.a)({},e,t)))),Object(u.a)(Object(u.a)({},n),{},Object(l.a)({},e,t))):null}))}),[]),s=Object(r.useCallback)((function(e){return o("wordsPerMinute",e)}),[o]),b=Object(r.useCallback)((function(e){return o("wordsPerMinute",((null===c||void 0===c?void 0:c.wordsPerMinute)||j.wordsPerMinute)+e)}),[null===c||void 0===c?void 0:c.wordsPerMinute,o]),v=Object(r.useCallback)((function(e){return o("font",e)}),[o]),O=Object(r.useCallback)((function(e){return o("fontSize",e)}),[o]),m=Object(r.useCallback)((function(e){return o("useORP",e)}),[o]),x=Object(r.useCallback)((function(e){return o("slowDownOnLongWords",e)}),[o]);return c?Object(p.jsx)(h,{value:{settings:c,setWordsPerMinute:s,updateWordsPerMinute:b,setFont:v,setFontSize:O,setUseORP:m,setSlowDownOnLongWords:x},children:t}):null},y=n(17),g=n(3),w=n.n(g),k=n(16),_=n(8),S=n(21),C=n.n(S),I=n(38),P=n.n(I),N=n(31),M=n.n(N),E=n(39),B=n.n(E),z=function(){};z.trim=function(e){for(;""===e[e.length-1];)e.pop();for(;""===e[0];)e.shift();return e},z.tokenize=function(e){var t=e.match(/(?<=\s+|^)["'\u2018\u201c'"[({\u27e8]?(.*?[.?!])(\s[.?!])*["'\u2019\u201d'"\])}\u27e9]?(?=\s+|$)|(?<=\s+|^)\S(.*?[.?!])(\s[.?!])*(?=\s+|$)/g);return t?(t=t.map(Function.prototype.call,String.prototype.trim),this.trim(t)):[e]};var L=z;function W(e,t){if(e.files[t])return e.files[t];var n=e.filter((function(e,n){return n.name.toLowerCase()===t.toLowerCase()}));return n.length>0?n[0]:null}function R(e){return T.apply(this,arguments)}function T(){return(T=Object(_.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=W(t,"mimetype")){e.next=3;break}throw new Error("No mimetype file in archive");case 3:return e.next=5,n.async("text");case 5:if("application/epub+zip"===e.sent.toLowerCase().trim()){e.next=8;break}throw new Error("Unsupported mime type");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return U.apply(this,arguments)}function U(){return(U=Object(_.a)(w.a.mark((function e(t){var n,r,a,c,i,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=W(t,"meta-inf/container.xml")){e.next=3;break}throw new Error("No container file in archive");case 3:return e.next=5,n.async("text");case 5:if(r=e.sent,(a=M.a.parse(r,{ignoreAttributes:!1})).container.rootfiles&&a.container.rootfiles.rootfile){e.next=9;break}throw new Error("No rootfiles found");case 9:if("application/oebps-package+xml"===(c=a.container.rootfiles.rootfile)["@_media-type"]){e.next=12;break}throw new Error("Rootfile in unknown format");case 12:if(i=c["@_full-path"]){e.next=15;break}throw new Error("Empty rootfile");case 15:if(o=W(t,i)){e.next=18;break}throw new Error("Rootfile not found from archive");case 18:return e.abrupt("return",o);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return F.apply(this,arguments)}function F(){return(F=Object(_.a)(w.a.mark((function e(t,n){var r,a,c,i,o,s,l,u,f,d;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.async("text");case 2:return r=e.sent,a=M.a.parse(r,{attributeNamePrefix:"",attrNodeName:"attr",textNodeName:"value",ignoreAttributes:!1,ignoreNameSpace:!0,parseAttributeValue:!0}),c=J(a),i=V(a),o=H(a),s=q(a),l=X(o,i),e.next=11,Y(t,n,l);case 11:return u=e.sent,f=K(o,s),e.next=15,G(t,n,f);case 15:return d=e.sent,e.abrupt("return",{cover:d,metadata:c,items:u});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){for(var t={},n=e.package.attr["unique-identifier"],r=0,a=Object.entries(e.package.metadata);r<a.length;r++){var c=a[r];if(c){var i=Object(d.a)(c,2),o=i[0],s=i[1];if(s){var l=null;if("identifier"===o){if(l=s,Array.isArray(s)?(l=s.find((function(e){return e.attr.id===n})))&&(l=l.value):l=s.value,!l)throw new Error("Cannot determine book unique identifier");l=String(l).replace("urn:uuid:","").toUpperCase().trim()}else l="object"===typeof s?s.value:s;t[o]=l}}}return t}function V(e){var t={items:[]};if("id"in e.package.spine.attr&&(t.id=e.package.spine.attr.id),"page-progression-direction"in e.package.spine.attr&&(t.direction=e.package.spine.attr["page-progression-direction"]),"toc"in e.package.spine.attr&&(t.toc=e.package.spine.attr.toc),Array.isArray(e.package.spine.itemref)){var n,r=Object(k.a)(e.package.spine.itemref);try{for(r.s();!(n=r.n()).done;){var a,c=n.value;null===(a=t.items)||void 0===a||a.push(c.attr.idref)}}catch(o){r.e(o)}finally{r.f()}}else{var i;null===(i=t.items)||void 0===i||i.push(e.package.spine.itemref.attr.idref)}return t}function H(e){var t,n=[],r=Object(k.a)(e.package.manifest.item);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.attr)}}catch(c){r.e(c)}finally{r.f()}return n}function q(e){if(e.package.guide&&"string"!==typeof e.package.guide)return e.package.guide.reference.attr}function K(e,t){if(t&&"cover"===t.type)return t;var n,r=Object(k.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.id.includes("cover.jpg"))return a}}catch(c){r.e(c)}finally{r.f()}}function X(e,t){var n,r=[],a=Object(k.a)(t.items);try{var c=function(){var t=n.value,a=e.find((function(e){return e.id===t}));a&&"application/xhtml+xml"===a["media-type"]&&r.push(a)};for(a.s();!(n=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}return r}function G(e,t,n){return Q.apply(this,arguments)}function Q(){return(Q=Object(_.a)(w.a.mark((function e(t,n,r){var a,c,i,o,s,l;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:return a=null===n||void 0===n?void 0:n.name.split("/"),c=Object(d.a)(a,2),i=c[0],c[1],o=[i,r.href].join("/"),e.next=6,t.files[o].async("blob");case 6:if(s=e.sent,l=r["media-type"]||B.a.lookup(r.href)){e.next=10;break}return e.abrupt("return",s);case 10:return e.abrupt("return",s.slice(0,s.size,l));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,n){return Z.apply(this,arguments)}function Z(){return(Z=Object(_.a)(w.a.mark((function e(t,n,r){var a,c,i,o,s,l,u,f,b,p,j;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null===n||void 0===n?void 0:n.name.split("/"),c=Object(d.a)(a,2),i=c[0],c[1],o=[],s=Object(k.a)(r);try{for(s.s();!(l=s.n()).done;)u=l.value.href,f=[i,u].join("/"),o.push(t.files[f].async("text"))}catch(v){s.e(v)}finally{s.f()}return b=new DOMParser,e.next=7,Promise.all(o);case 7:return p=e.sent,j=p.map((function(e){var t,n;return L.tokenize(((null===(t=b.parseFromString(e,"application/xhtml+xml").body.textContent)||void 0===t||null===(n=t.trimStart())||void 0===n?void 0:n.trimEnd())+".").split("\n").join(". ")).map((function(e){return e.replaceAll(". .",".")})).filter((function(e){return"."!==e}))})).reduce((function(e,t){return[].concat(Object(y.a)(e),Object(y.a)(t))}),[]),e.abrupt("return",j);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(_.a)(w.a.mark((function e(t){var n,r,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/epub+zip"===t.type){e.next=2;break}throw new Error("Not an Epub file");case 2:return n=new P.a,e.next=5,n.loadAsync(t);case 5:if(r=e.sent,0!==Object.keys(r.files).length){e.next=8;break}throw new Error("No files in archive");case 8:return e.next=10,R(r);case 10:return e.next=12,D(r);case 12:return a=e.sent,e.next=15,A(r,a);case 15:return c=e.sent,e.abrupt("return",c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function(e){return $.apply(this,arguments)},te=b(),ne=Object(d.a)(te,2),re=ne[0],ae=ne[1],ce=function(e){var t=e.children,n=Object(r.useState)(!1),a=Object(d.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)([]),s=Object(d.a)(o,2),l=s[0],f=s[1];Object(r.useEffect)((function(){Object(_.a)(w.a.mark((function e(){var t,n,r,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.getItem("library");case 2:t=e.sent,f(t||[]),n=Object(k.a)(t||[]),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=15;break}return a=r.value,e.next=11,C.a.getItem("".concat(a.id,"_cover"));case 11:(c=e.sent)&&(a.cover=URL.createObjectURL(c));case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),n.e(e.t0);case 20:return e.prev=20,n.f(),e.finish(20);case 23:i(!1);case 24:case"end":return e.stop()}}),e,null,[[5,17,20,23]])})))()}),[]);var b=Object(r.useCallback)(function(){var e=Object(_.a)(w.a.mark((function e(t){var n,r,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Array.from(t).map((function(e){return ee(e)})));case 2:return n=e.sent,r=n.map((function(e){var t=e.items.reduce((function(e,t){return e+t.split(" ").length}),0),n={id:e.metadata.identifier,title:e.metadata.title||"",creator:e.metadata.creator||"",cover:!!e.cover,totalWords:t,totalSentences:e.items.length};return{id:n.id,info:n,items:e.items,cover:e.cover,coverUrl:!!e.cover&&URL.createObjectURL(e.cover)}})),e.next=6,Promise.all(r.map((function(e){var t=e.id,n=e.items;return C.a.setItem(t,n)})));case 6:return console.log(r),a=[].concat(Object(y.a)(l),Object(y.a)(r.map((function(e){return e.info})))),e.next=10,C.a.setItem("library",a);case 10:return e.next=12,Promise.all(r.filter((function(e){return!!e.cover})).map((function(e){var t=e.id,n=e.cover;return C.a.setItem("".concat(t,"_cover"),n)})));case 12:f([].concat(Object(y.a)(l),Object(y.a)(r.map((function(e){var t=e.info,n=e.coverUrl;return Object(u.a)(Object(u.a)({},t),{},{cover:n})})))));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]),j=Object(r.useCallback)((function(e){}),[]),v=Object(r.useCallback)(function(){var e=Object(_.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.getItem(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return n=e.t0,r=l.find((function(e){return e.id===t})),e.abrupt("return",{info:r,items:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]);return c?null:Object(p.jsx)(ae,{value:{library:l,loadBooks:b,deleteBook:j,getBook:v},children:t})},ie=b(),oe=Object(d.a)(ie,2),se=oe[0],le=oe[1],ue=function(e){var t=e.children,n=Object(r.useCallback)((function(e){var t=localStorage.getItem(e);if(!t){var n={currentWordIndex:0,currentSentenceIndex:0};return localStorage.setItem(e,JSON.stringify(n)),n}return JSON.parse(t)}),[]),a=Object(r.useCallback)((function(e,t){var n=localStorage.getItem(e);n&&localStorage.setItem(e,JSON.stringify(Object(u.a)(Object(u.a)({},JSON.parse(n)),{},{currentWordIndex:t})))}),[]),c=Object(r.useCallback)((function(e,t){var n=localStorage.getItem(e);if(!n)return 0;var r=JSON.parse(n),a=r.currentWordIndex+t;return localStorage.setItem(e,JSON.stringify({currentBookStat:r,currentWordIndex:a})),a}),[]),i=Object(r.useCallback)((function(e,t){var n=localStorage.getItem(e);n&&localStorage.setItem(e,JSON.stringify(Object(u.a)(Object(u.a)({},JSON.parse(n)),{},{currentSentenceIndex:t})))}),[]),o=Object(r.useCallback)((function(e,t){var n=localStorage.getItem(e);if(!n)return 0;var r=JSON.parse(n),a=r.currentSentenceIndex+t;return localStorage.setItem(e,JSON.stringify({currentBookStat:r,currentSentenceIndex:a})),a}),[]);return Object(p.jsx)(le,{value:{getBookStats:n,setBookCurrentWordIndex:a,updateBookCurrentWordIndex:c,setBookSentenceWordIndex:i,updateBookSentenceWordIndex:o},children:t})},fe=function(e){var t=e.children;return Object(p.jsx)(s.a,{children:Object(p.jsx)(x,{children:Object(p.jsx)(ue,{children:Object(p.jsx)(ce,{children:t})})})})},de=n(41),be=n.n(de),pe=n(23),je=n.n(pe),ve=n(43),Oe=n(42),me=n(24),he=n.n(me),xe=document.createElement("canvas").getContext("2d");var ye=function(){return Object(r.useCallback)((function(e,t,n){xe.font="".concat(t,"px ").concat(e);var r=xe.measureText(n);return Math.abs(r.actualBoundingBoxLeft)+Math.abs(r.actualBoundingBoxRight)}),[])};var ge=function(e){var t=e.style,n=e.data,r=e.index;return Object(p.jsx)("div",{className:je()(he.a.sentenceRow,Object(l.a)({},he.a.selected,r===n.currentIndex)),onClick:function(){return n.onSentenceClick(r)},style:t,children:n.sentences[r]})};var we=function(e){var t=e.fontFamily,n=void 0===t?"Kazemir":t,a=e.fontSize,c=void 0===a?16:a,i=e.sentences,o=e.currentIndex,s=e.onSentenceClick,l=Object(r.useState)(c),u=Object(d.a)(l,2),f=u[0],b=u[1];Object(r.useEffect)((function(){b(function(e,t){var n=document.createElement("DIV");n.id="__textMeasure",n.innerHTML="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ ",n.style.position="absolute",n.style.top="-500px",n.style.left="0",n.style.fontFamily=e,n.style.fontSize=t+"px",document.body.appendChild(n);var r=n.offsetHeight;return document.body.removeChild(n),r}(n,c))}),[n,c]),function(){var e=document.createElement("div");e.style.fontFamily="Kazemir",e.style.fontSize="16px",e.style.display="block",e.innerText="Today he was particularly nervous and worried because something had gone seriously wrong with his job,  which was to see that Arthur Dent\u2019s house got cleared out of the  way before the day was out"}();var j=ye(),v=Object(r.useCallback)((function(e,t){return 2===t&&console.log(Math.ceil(j(n,c,i[t]))/e),Math.ceil((Math.ceil(j(n,c,i[t])/e)+1)*f)}),[i,c,n,j]),O=Object(r.useMemo)((function(){return{sentences:i,currentIndex:o,onSentenceClick:s}}),[i,o,s]);return Object(p.jsx)("div",{className:he.a.container,style:{fontFamily:n,fontSize:"".concat(c,"px")},children:Object(p.jsx)("div",{className:he.a.b,children:Object(p.jsx)(Oe.a,{onResize:function(){return console.log("resize")},children:function(e){var t=e.height,n=e.width;return Object(p.jsx)(ve.a,{height:t,width:n,itemData:O,estimatedItemSize:1.4*c,itemSize:v.bind(null,n),itemCount:i.length,className:he.a.list,overscanCount:20,children:ge})}})})})};n(71);var ke=function(e){var t=e.word,n=function(e){for(var t=e.length;-1!=='\n,.?!:;"'.indexOf(e[--t]););switch(++t){case 0:case 1:return 0;case 2:case 3:return 1;default:return Math.floor(t/2)-1}}(t),r=t.length,a="",c="";return 2===r?c="\xa0":1===r||3===r||(a="".padStart(r%2?Math.floor(r/2)-n+1:Math.floor(r/2)-n,"\xa0")),Object(p.jsxs)("div",{className:"word",children:[a+t.substr(0,n),Object(p.jsx)("span",{className:"selected",children:t.substr(n,1)}),t.substr(n+1)+c]})},_e=n(25),Se=n.n(_e),Ce=function(e){var t=e.isPlaying,n=e.bookText,a=e.currentWordIndex,c=e.onPlayerClick,i=Object(r.useCallback)((function(){t&&c()}),[t,c]);return Object(p.jsx)("div",{className:Se.a.container,onClick:i,children:Object(p.jsx)("div",{className:je()(Se.a.textPlayer,Object(l.a)({},Se.a.playing,t)),children:Object(p.jsx)(ke,{word:n[a]})})})};function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ne=r.createElement("path",{fill:"currentColor",d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"});function Me(e,t){var n=e.title,a=e.titleId,c=Pe(e,["title","titleId"]);return r.createElement("svg",Ie({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"minus",className:"svg-inline--fa fa-minus fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Ne)}var Ee=r.forwardRef(Me);n.p;function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ze(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Le=r.createElement("path",{fill:"currentColor",d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"});function We(e,t){var n=e.title,a=e.titleId,c=ze(e,["title","titleId"]);return r.createElement("svg",Be({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"plus",className:"svg-inline--fa fa-plus fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Le)}var Re=r.forwardRef(We),Te=(n.p,n(13)),De=n.n(Te);function Ue(e,t){return(t/e*100).toFixed(1)}function Ae(e,t,n){return function(e){var t=e,n=Math.floor((t%=31536e3)/86400);if(n)return n+" d";var r=Math.floor((t%=86400)/3600);if(r)return r+" h";var a=Math.floor((t%=3600)/60);if(a)return a+" m";var c=t%60;return c?c+" s":""}(Math.floor((e-t)/(n/60)))}var Fe=function(e){var t=e.isPlaying,n=e.speedDown,a=e.speedUp,c=e.togglePlay,i=e.wordsCount,o=e.currentIndex,s=e.wordsPerMinute,l=Ue(i,o),u=Ae(i,o,s),f=Object(r.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),n()}),[n]),d=Object(r.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),a()}),[a]);return t?null:Object(p.jsxs)("div",{className:De.a.container,onClick:c,children:[Object(p.jsx)("div",{className:De.a.topLine}),Object(p.jsxs)("div",{className:De.a.controls,children:[Object(p.jsx)(Ee,{className:De.a.button,onClick:f}),Object(p.jsxs)("div",{className:De.a.wordsPerMinute,children:[s," ",Object(p.jsx)("br",{})," word/m"]}),Object(p.jsx)(Re,{className:De.a.button,onClick:d})]}),Object(p.jsxs)("div",{className:De.a.stats,children:[Object(p.jsx)("div",{className:De.a.bar,style:{"--total":"".concat(l,"%")}}),Object(p.jsxs)("div",{className:De.a.bottom,children:[Object(p.jsx)("div",{children:u}),Object(p.jsxs)("div",{children:[l,"%"]})]})]})]})};function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ve(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var He=r.createElement("path",{fill:"currentColor",d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"});function qe(e,t){var n=e.title,a=e.titleId,c=Ve(e,["title","titleId"]);return r.createElement("svg",Je({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"cog",className:"svg-inline--fa fa-cog fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,He)}var Ke=r.forwardRef(qe);n.p;function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ge(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Qe=r.createElement("path",{fill:"currentColor",d:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"});function Ye(e,t){var n=e.title,a=e.titleId,c=Ge(e,["title","titleId"]);return r.createElement("svg",Xe({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"angle-left",className:"svg-inline--fa fa-angle-left fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Qe)}var Ze=r.forwardRef(Ye),$e=(n.p,n(34)),et=n.n($e),tt=function(e){e.isPlaying;var t=e.title,n=Object(o.f)(),a=Object(r.useCallback)((function(){return n.goBack()}),[n]);return Object(p.jsxs)("div",{className:et.a.container,children:[Object(p.jsx)(Ze,{onClick:a}),Object(p.jsx)("div",{className:et.a.title,children:t}),Object(p.jsx)(Ke,{})]})},nt=Number.MAX_SAFE_INTEGER;var rt=function(){var e=Object(o.g)().id,t=re().getBook,n=se(),a=n.getBookStats,c=n.updateBookCurrentWordIndex,i=n.setBookSentenceWordIndex,s=n.setBookCurrentWordIndex,l=m(),f=l.settings,b=l.updateWordsPerMinute,j=Object(r.useState)(),v=Object(d.a)(j,2),O=v[0],h=v[1],x=Object(r.useState)([]),y=Object(d.a)(x,2),g=y[0],w=y[1],k=Object(r.useState)([]),_=Object(d.a)(k,2),S=_[0],C=_[1],I=Object(r.useState)({currentWordIndex:0,currentSentenceIndex:0}),P=Object(d.a)(I,2),N=P[0],M=N.currentWordIndex,E=N.currentSentenceIndex,B=P[1];Object(r.useEffect)((function(){t(e).then((function(t){var n=t.info,r=t.items;B(a(e)),h(n),w(r),C(r.join(" ").split(" "))}))}),[e]);var z=Object(r.useState)(!1),L=Object(d.a)(z,2),W=L[0],R=L[1],T=function(e){var t=(new Date).getTime(),n=Object(r.useState)(!1),a=Object(d.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(t),s=Object(d.a)(o,2)[1],l=Object(r.useState)(nt),u=Object(d.a)(l,2),f=u[0],b=u[1],p=Object(r.useCallback)((function(){return c}),[c]),j=Object(r.useCallback)((function(){return!p()}),[p]),v=Object(r.useCallback)((function(){var t=(new Date).getTime(),n=e.delay?Math.max(t,t):nt;b(n),i(!0)}),[e.delay]),O=Object(r.useCallback)((function(){b(nt),i(!1)}),[]);return Object(r.useEffect)((function(){var n;if(e.delay&&!j()){var r=Math.max(0,Math.floor((t-f)/e.delay));if(r%2!==1)if(t>=f){var a=0;if("function"===typeof e.callback)try{a=e.callback()||0}catch(o){console.error(o)}var c=r*e.delay,i=Math.max(t,f+e.delay+c+a);b(i),n=setTimeout((function(){s((new Date).getTime())}),Math.max(i-(new Date).getTime(),1))}else f<nt&&(n=setTimeout((function(){s((new Date).getTime())}),Math.max(f-(new Date).getTime(),1)));else n=setTimeout((function(){s((new Date).getTime())}),20)}return function(){clearTimeout(n)}}),[t,f,j,e.delay,e]),{start:v,stop:O}}({delay:60/f.wordsPerMinute*1e3,callback:function(){var t=c(e,1);return B((function(e){return Object(u.a)(Object(u.a)({},e),{},{currentWordIndex:t})})),20*Math.max(0,S[t].length-10)}}),D=T.start,U=T.stop,A=Object(r.useCallback)((function(){return R((function(e){var t=!e;return t?D():U(),t}))}),[D,U]),F=Object(r.useCallback)((function(){return b(20)}),[b]),J=Object(r.useCallback)((function(){return b(-20)}),[b]),V=Object(r.useCallback)((function(){A()}),[A]),H=Object(r.useCallback)((function(t){var n=g.slice(0,t).join(" ").split(" ").length-1;B((function(e){return Object(u.a)(Object(u.a)({},e),{},{currentSentenceIndex:t,currentWordIndex:n})})),i(e,t),s(e,n)}),[i,g,e]);return Object(p.jsxs)("div",{className:be.a.container,children:[Object(p.jsx)(tt,{isPlaying:W,title:(null===O||void 0===O?void 0:O.title)||""}),!W&&Object(p.jsx)(we,{sentences:g,currentIndex:E,onSentenceClick:H}),W&&Object(p.jsx)(Ce,{isPlaying:W,bookText:S,currentWordIndex:M,onPlayerClick:V}),Object(p.jsx)(Fe,{isPlaying:W,currentIndex:M,speedDown:J,speedUp:F,togglePlay:A,wordsCount:g.length,wordsPerMinute:f.wordsPerMinute})]})},at=n(14),ct=n.n(at);var it=function(e){var t,n=e.book,a=e.stats,c=(e.onClick,Object(r.useRef)(null));return Ue(1500,1e3),Ae(1500,1e3,320),console.log(n),Object(p.jsxs)(s.b,{to:"/book/".concat(n.id),className:ct.a.container,children:[Object(p.jsx)("div",{className:je()(ct.a.book,ct.a.nocover,(t={},Object(l.a)(t,ct.a.nocover,!n.cover),Object(l.a)(t,ct.a.nocover,n.cover),t)),children:(n.cover||!n.cover)&&Object(p.jsxs)("div",{ref:c,className:ct.a.bookWrapper,children:[Object(p.jsx)("svg",{children:Object(p.jsx)("foreignObject",{x:"0",y:"0",width:"100%",height:"100%",children:Object(p.jsx)("div",{className:ct.a.title,children:n.title})})}),Object(p.jsx)("svg",{children:Object(p.jsx)("foreignObject",{x:"0",y:"50%",width:"100%",height:"100%",children:Object(p.jsx)("div",{className:ct.a.author,children:n.creator})})})]})}),Object(p.jsxs)("div",{className:ct.a.bottom,children:[Object(p.jsx)("div",{children:"100"!==a.completed?"".concat(a.completed," %"):"FINISHED"}),Object(p.jsx)("div",{children:a.timeToRead})]})]})},ot=n(18),st=n.n(ot);var lt=function(e,t){return Object(r.useCallback)((function(){var e=document.createElement("input");e.type="file",e.multiple=!0,e.onchange=function(e){if(!e.target||0===e.target.files.length)return t([]);t(e.target.files)},e.click()}),[t])},ut=function(){var e=re(),t=e.library,n=e.loadBooks,a=(se().getBookStats,lt({multiple:!0},function(){var e=Object(_.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),c=Object(r.useCallback)((function(e){}),[]);return Object(p.jsxs)("div",{className:st.a.container,children:[Object(p.jsxs)("div",{className:st.a.header,children:[Object(p.jsx)("div",{className:st.a.title,children:"Library"}),Object(p.jsx)("div",{className:st.a.add,onClick:a,children:Object(p.jsx)(Re,{})})]}),Object(p.jsx)("div",{className:st.a.listContainer,children:Object(p.jsx)("div",{className:st.a.list,children:t.map((function(e){return Object(p.jsx)(it,{book:e,stats:{completed:"100",timeToRead:"1"},onClick:c},e.id)}))})}),Object(p.jsxs)("div",{className:st.a.bottomMenu,children:[Object(p.jsx)("div",{children:"Library"}),Object(p.jsx)("div",{children:"Settings"})]})]})};n(72);var ft=function(){return Object(p.jsx)(fe,{children:Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/book/:id",component:rt}),Object(p.jsx)(o.a,{path:"/",component:ut})]})})},dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(ft,{})}),document.getElementById("root")),dt()}},[[73,1,2]]]);
//# sourceMappingURL=main.6ae39a36.chunk.js.map